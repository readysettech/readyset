
statement ok
use `test`


statement ok
SET @@SESSION.sql_mode = 'NO_ENGINE_SUBSTITUTION'


statement ok
SELECT VERSION()


statement ok
SET FOREIGN_KEY_CHECKS = 0


statement ok
DROP TABLE IF EXISTS access_tokens


statement ok
CREATE TABLE access_tokens (id INT(10) UNSIGNED NOT NULL AUTO_INCREMENT, token VARCHAR(40) COLLATE utf8mb4_unicode_ci NOT NULL, user_id INT(10) UNSIGNED NOT NULL, last_activity_at DATETIME NOT NULL, created_at DATETIME NOT NULL, type VARCHAR(100) COLLATE utf8mb4_unicode_ci NOT NULL, title VARCHAR(150) COLLATE utf8mb4_unicode_ci DEFAULT NULL, last_ip_address VARCHAR(45) COLLATE utf8mb4_unicode_ci DEFAULT NULL, last_user_agent VARCHAR(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL, PRIMARY KEY (id), UNIQUE KEY access_tokens_token_unique (token), KEY access_tokens_user_id_foreign (user_id), KEY access_tokens_type_index (type), CONSTRAINT access_tokens_user_id_foreign FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE)


statement ok
DROP TABLE IF EXISTS api_keys


statement ok
CREATE TABLE api_keys (`key` VARCHAR(100) COLLATE utf8mb4_unicode_ci NOT NULL, id INT(10) UNSIGNED NOT NULL AUTO_INCREMENT, allowed_ips VARCHAR(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL, scopes VARCHAR(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL, user_id INT(10) UNSIGNED DEFAULT NULL, created_at DATETIME NOT NULL, last_activity_at DATETIME DEFAULT NULL, PRIMARY KEY (id), UNIQUE KEY api_keys_key_unique (`key`), KEY api_keys_user_id_foreign (user_id), CONSTRAINT api_keys_user_id_foreign FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE)


statement ok
DROP TABLE IF EXISTS discussion_user


statement ok
CREATE TABLE discussion_user (user_id INT(10) UNSIGNED NOT NULL, discussion_id INT(10) UNSIGNED NOT NULL, last_read_at DATETIME DEFAULT NULL, last_read_post_number INT(10) UNSIGNED DEFAULT NULL, PRIMARY KEY (user_id, discussion_id), KEY discussion_user_discussion_id_foreign (discussion_id), CONSTRAINT discussion_user_discussion_id_foreign FOREIGN KEY (discussion_id) REFERENCES discussions (id) ON DELETE CASCADE, CONSTRAINT discussion_user_user_id_foreign FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE)


statement ok
DROP TABLE IF EXISTS discussions


statement ok
CREATE TABLE discussions (id INT(10) UNSIGNED NOT NULL AUTO_INCREMENT, title VARCHAR(200) COLLATE utf8mb4_unicode_ci NOT NULL, comment_count INT(11) NOT NULL DEFAULT 1, participant_count INT(10) UNSIGNED NOT NULL DEFAULT 0, post_number_index INT(10) UNSIGNED NOT NULL DEFAULT 0, created_at DATETIME NOT NULL, user_id INT(10) UNSIGNED DEFAULT NULL, first_post_id INT(10) UNSIGNED DEFAULT NULL, last_posted_at DATETIME DEFAULT NULL, last_posted_user_id INT(10) UNSIGNED DEFAULT NULL, last_post_id INT(10) UNSIGNED DEFAULT NULL, last_post_number INT(10) UNSIGNED DEFAULT NULL, hidden_at DATETIME DEFAULT NULL, hidden_user_id INT(10) UNSIGNED DEFAULT NULL, slug VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, is_private TINYINT(1) NOT NULL DEFAULT 0, PRIMARY KEY (id), KEY discussions_hidden_user_id_foreign (hidden_user_id), KEY discussions_first_post_id_foreign (first_post_id), KEY discussions_last_post_id_foreign (last_post_id), KEY discussions_last_posted_at_index (last_posted_at), KEY discussions_last_posted_user_id_index (last_posted_user_id), KEY discussions_created_at_index (created_at), KEY discussions_user_id_index (user_id), KEY discussions_comment_count_index (comment_count), KEY discussions_participant_count_index (participant_count), KEY discussions_hidden_at_index (hidden_at), FULLTEXT KEY title (title), CONSTRAINT discussions_first_post_id_foreign FOREIGN KEY (first_post_id) REFERENCES posts (id) ON DELETE SET NULL, CONSTRAINT discussions_hidden_user_id_foreign FOREIGN KEY (hidden_user_id) REFERENCES users (id) ON DELETE SET NULL, CONSTRAINT discussions_last_post_id_foreign FOREIGN KEY (last_post_id) REFERENCES posts (id) ON DELETE SET NULL, CONSTRAINT discussions_last_posted_user_id_foreign FOREIGN KEY (last_posted_user_id) REFERENCES users (id) ON DELETE SET NULL, CONSTRAINT discussions_user_id_foreign FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE SET NULL)


statement ok
DROP TABLE IF EXISTS email_tokens


statement ok
CREATE TABLE email_tokens (token VARCHAR(100) COLLATE utf8mb4_unicode_ci NOT NULL, email VARCHAR(150) COLLATE utf8mb4_unicode_ci NOT NULL, user_id INT(10) UNSIGNED NOT NULL, created_at DATETIME DEFAULT NULL, PRIMARY KEY (token), KEY email_tokens_user_id_foreign (user_id), CONSTRAINT email_tokens_user_id_foreign FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE)


statement ok
DROP TABLE IF EXISTS group_permission


statement ok
CREATE TABLE group_permission (group_id INT(10) UNSIGNED NOT NULL, permission VARCHAR(100) COLLATE utf8mb4_unicode_ci NOT NULL, PRIMARY KEY (group_id, permission), CONSTRAINT group_permission_group_id_foreign FOREIGN KEY (group_id) REFERENCES `groups` (id) ON DELETE CASCADE)


statement ok
DROP TABLE IF EXISTS group_user


statement ok
CREATE TABLE group_user (user_id INT(10) UNSIGNED NOT NULL, group_id INT(10) UNSIGNED NOT NULL, PRIMARY KEY (user_id, group_id), KEY group_user_group_id_foreign (group_id), CONSTRAINT group_user_group_id_foreign FOREIGN KEY (group_id) REFERENCES `groups` (id) ON DELETE CASCADE, CONSTRAINT group_user_user_id_foreign FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE)


statement ok
DROP TABLE IF EXISTS `groups`


statement ok
CREATE TABLE `groups` (id INT(10) UNSIGNED NOT NULL AUTO_INCREMENT, name_singular VARCHAR(100) COLLATE utf8mb4_unicode_ci NOT NULL, name_plural VARCHAR(100) COLLATE utf8mb4_unicode_ci NOT NULL, color VARCHAR(20) COLLATE utf8mb4_unicode_ci DEFAULT NULL, icon VARCHAR(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL, is_hidden TINYINT(1) NOT NULL DEFAULT 0, PRIMARY KEY (id))


statement ok
DROP TABLE IF EXISTS login_providers


statement ok
CREATE TABLE login_providers (id INT(10) UNSIGNED NOT NULL AUTO_INCREMENT, user_id INT(10) UNSIGNED NOT NULL, provider VARCHAR(100) COLLATE utf8mb4_unicode_ci NOT NULL, identifier VARCHAR(100) COLLATE utf8mb4_unicode_ci NOT NULL, created_at DATETIME DEFAULT NULL, last_login_at DATETIME DEFAULT NULL, PRIMARY KEY (id), UNIQUE KEY login_providers_provider_identifier_unique (provider, identifier), KEY login_providers_user_id_foreign (user_id), CONSTRAINT login_providers_user_id_foreign FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE)


statement ok
DROP TABLE IF EXISTS migrations


statement ok
CREATE TABLE migrations (id INT(10) UNSIGNED NOT NULL AUTO_INCREMENT, migration VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, extension VARCHAR(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL, PRIMARY KEY (id))


statement ok
DROP TABLE IF EXISTS notifications


statement ok
CREATE TABLE notifications (id INT(10) UNSIGNED NOT NULL AUTO_INCREMENT, user_id INT(10) UNSIGNED NOT NULL, from_user_id INT(10) UNSIGNED DEFAULT NULL, type VARCHAR(100) COLLATE utf8mb4_unicode_ci NOT NULL, subject_id INT(10) UNSIGNED DEFAULT NULL, data BLOB DEFAULT NULL, created_at DATETIME NOT NULL, is_deleted TINYINT(1) NOT NULL DEFAULT 0, read_at DATETIME DEFAULT NULL, PRIMARY KEY (id), KEY notifications_from_user_id_foreign (from_user_id), KEY notifications_user_id_index (user_id), CONSTRAINT notifications_from_user_id_foreign FOREIGN KEY (from_user_id) REFERENCES users (id) ON DELETE SET NULL, CONSTRAINT notifications_user_id_foreign FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE)


statement ok
DROP TABLE IF EXISTS password_tokens


statement ok
CREATE TABLE password_tokens (token VARCHAR(100) COLLATE utf8mb4_unicode_ci NOT NULL, user_id INT(10) UNSIGNED NOT NULL, created_at DATETIME DEFAULT NULL, PRIMARY KEY (token), KEY password_tokens_user_id_foreign (user_id), CONSTRAINT password_tokens_user_id_foreign FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE)


statement ok
DROP TABLE IF EXISTS post_user


statement ok
CREATE TABLE post_user (post_id INT(10) UNSIGNED NOT NULL, user_id INT(10) UNSIGNED NOT NULL, PRIMARY KEY (post_id, user_id), KEY post_user_user_id_foreign (user_id), CONSTRAINT post_user_post_id_foreign FOREIGN KEY (post_id) REFERENCES posts (id) ON DELETE CASCADE, CONSTRAINT post_user_user_id_foreign FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE)


statement ok
DROP TABLE IF EXISTS posts


statement ok
CREATE TABLE posts (id INT(10) UNSIGNED NOT NULL AUTO_INCREMENT, discussion_id INT(10) UNSIGNED NOT NULL, number INT(10) UNSIGNED DEFAULT NULL, created_at DATETIME NOT NULL, user_id INT(10) UNSIGNED DEFAULT NULL, type VARCHAR(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL, content MEDIUMTEXT COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT ' ', edited_at DATETIME DEFAULT NULL, edited_user_id INT(10) UNSIGNED DEFAULT NULL, hidden_at DATETIME DEFAULT NULL, hidden_user_id INT(10) UNSIGNED DEFAULT NULL, ip_address VARCHAR(45) COLLATE utf8mb4_unicode_ci DEFAULT NULL, is_private TINYINT(1) NOT NULL DEFAULT 0, PRIMARY KEY (id), UNIQUE KEY posts_discussion_id_number_unique (discussion_id, number), KEY posts_edited_user_id_foreign (edited_user_id), KEY posts_hidden_user_id_foreign (hidden_user_id), KEY posts_discussion_id_number_index (discussion_id, number), KEY posts_discussion_id_created_at_index (discussion_id, created_at), KEY posts_user_id_created_at_index (user_id, created_at), FULLTEXT KEY content (content), CONSTRAINT posts_discussion_id_foreign FOREIGN KEY (discussion_id) REFERENCES discussions (id) ON DELETE CASCADE, CONSTRAINT posts_edited_user_id_foreign FOREIGN KEY (edited_user_id) REFERENCES users (id) ON DELETE SET NULL, CONSTRAINT posts_hidden_user_id_foreign FOREIGN KEY (hidden_user_id) REFERENCES users (id) ON DELETE SET NULL, CONSTRAINT posts_user_id_foreign FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE SET NULL)


statement ok
DROP TABLE IF EXISTS registration_tokens


statement ok
CREATE TABLE registration_tokens (token VARCHAR(100) COLLATE utf8mb4_unicode_ci NOT NULL, payload TEXT COLLATE utf8mb4_unicode_ci DEFAULT NULL, created_at DATETIME DEFAULT NULL, provider VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, identifier VARCHAR(255) COLLATE utf8mb4_unicode_ci NOT NULL, user_attributes TEXT COLLATE utf8mb4_unicode_ci DEFAULT NULL, PRIMARY KEY (token))


statement ok
DROP TABLE IF EXISTS settings


statement ok
CREATE TABLE settings (`key` VARCHAR(100) COLLATE utf8mb4_unicode_ci NOT NULL, value TEXT COLLATE utf8mb4_unicode_ci DEFAULT NULL, PRIMARY KEY (`key`))


statement ok
DROP TABLE IF EXISTS users


statement ok
CREATE TABLE users (id INT(10) UNSIGNED NOT NULL AUTO_INCREMENT, username VARCHAR(100) COLLATE utf8mb4_unicode_ci NOT NULL, email VARCHAR(150) COLLATE utf8mb4_unicode_ci NOT NULL, is_email_confirmed TINYINT(1) NOT NULL DEFAULT 0, password VARCHAR(100) COLLATE utf8mb4_unicode_ci NOT NULL, avatar_url VARCHAR(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL, preferences BLOB DEFAULT NULL, joined_at DATETIME DEFAULT NULL, last_seen_at DATETIME DEFAULT NULL, marked_all_as_read_at DATETIME DEFAULT NULL, read_notifications_at DATETIME DEFAULT NULL, discussion_count INT(10) UNSIGNED NOT NULL DEFAULT 0, comment_count INT(10) UNSIGNED NOT NULL DEFAULT 0, PRIMARY KEY (id), UNIQUE KEY users_username_unique (username), UNIQUE KEY users_email_unique (email), KEY users_joined_at_index (joined_at), KEY users_last_seen_at_index (last_seen_at), KEY users_discussion_count_index (discussion_count), KEY users_comment_count_index (comment_count))


statement ok
INSERT INTO migrations VALUES (1, '2015_02_24_000000_create_access_tokens_table', NULL)


statement ok
INSERT INTO migrations VALUES (2, '2015_02_24_000000_create_api_keys_table', NULL)


statement ok
INSERT INTO migrations VALUES (3, '2015_02_24_000000_create_config_table', NULL)


statement ok
INSERT INTO migrations VALUES (4, '2015_02_24_000000_create_discussions_table', NULL)


statement ok
INSERT INTO migrations VALUES (5, '2015_02_24_000000_create_email_tokens_table', NULL)


statement ok
INSERT INTO migrations VALUES (6, '2015_02_24_000000_create_groups_table', NULL)


statement ok
INSERT INTO migrations VALUES (7, '2015_02_24_000000_create_notifications_table', NULL)


statement ok
INSERT INTO migrations VALUES (8, '2015_02_24_000000_create_password_tokens_table', NULL)


statement ok
INSERT INTO migrations VALUES (9, '2015_02_24_000000_create_permissions_table', NULL)


statement ok
INSERT INTO migrations VALUES (10, '2015_02_24_000000_create_posts_table', NULL)


statement ok
INSERT INTO migrations VALUES (11, '2015_02_24_000000_create_users_discussions_table', NULL)


statement ok
INSERT INTO migrations VALUES (12, '2015_02_24_000000_create_users_groups_table', NULL)


statement ok
INSERT INTO migrations VALUES (13, '2015_02_24_000000_create_users_table', NULL)


statement ok
INSERT INTO migrations VALUES (14, '2015_09_15_000000_create_auth_tokens_table', NULL)


statement ok
INSERT INTO migrations VALUES (15, '2015_09_20_224327_add_hide_to_discussions', NULL)


statement ok
INSERT INTO migrations VALUES (16, '2015_09_22_030432_rename_notification_read_time', NULL)


statement ok
INSERT INTO migrations VALUES (17, '2015_10_07_130531_rename_config_to_settings', NULL)


statement ok
INSERT INTO migrations VALUES (18, '2015_10_24_194000_add_ip_address_to_posts', NULL)


statement ok
INSERT INTO migrations VALUES (19, '2015_12_05_042721_change_access_tokens_columns', NULL)


statement ok
INSERT INTO migrations VALUES (20, '2015_12_17_194247_change_settings_value_column_to_text', NULL)


statement ok
INSERT INTO migrations VALUES (21, '2016_02_04_095452_add_slug_to_discussions', NULL)


statement ok
INSERT INTO migrations VALUES (22, '2017_04_07_114138_add_is_private_to_discussions', NULL)


statement ok
INSERT INTO migrations VALUES (23, '2017_04_07_114138_add_is_private_to_posts', NULL)


statement ok
INSERT INTO migrations VALUES (24, '2018_01_11_093900_change_access_tokens_columns', NULL)


statement ok
INSERT INTO migrations VALUES (25, '2018_01_11_094000_change_access_tokens_add_foreign_keys', NULL)


statement ok
INSERT INTO migrations VALUES (26, '2018_01_11_095000_change_api_keys_columns', NULL)


statement ok
INSERT INTO migrations VALUES (27, '2018_01_11_101800_rename_auth_tokens_to_registration_tokens', NULL)


statement ok
INSERT INTO migrations VALUES (28, '2018_01_11_102000_change_registration_tokens_rename_id_to_token', NULL)


statement ok
INSERT INTO migrations VALUES (29, '2018_01_11_102100_change_registration_tokens_created_at_to_datetime', NULL)


statement ok
INSERT INTO migrations VALUES (30, '2018_01_11_120604_change_posts_table_to_innodb', NULL)


statement ok
INSERT INTO migrations VALUES (31, '2018_01_11_155200_change_discussions_rename_columns', NULL)


statement ok
INSERT INTO migrations VALUES (32, '2018_01_11_155300_change_discussions_add_foreign_keys', NULL)


statement ok
INSERT INTO migrations VALUES (33, '2018_01_15_071700_rename_users_discussions_to_discussion_user', NULL)


statement ok
INSERT INTO migrations VALUES (34, '2018_01_15_071800_change_discussion_user_rename_columns', NULL)


statement ok
INSERT INTO migrations VALUES (35, '2018_01_15_071900_change_discussion_user_add_foreign_keys', NULL)


statement ok
INSERT INTO migrations VALUES (36, '2018_01_15_072600_change_email_tokens_rename_id_to_token', NULL)


statement ok
INSERT INTO migrations VALUES (37, '2018_01_15_072700_change_email_tokens_add_foreign_keys', NULL)


statement ok
INSERT INTO migrations VALUES (38, '2018_01_15_072800_change_email_tokens_created_at_to_datetime', NULL)


statement ok
INSERT INTO migrations VALUES (39, '2018_01_18_130400_rename_permissions_to_group_permission', NULL)


statement ok
INSERT INTO migrations VALUES (40, '2018_01_18_130500_change_group_permission_add_foreign_keys', NULL)


statement ok
INSERT INTO migrations VALUES (41, '2018_01_18_130600_rename_users_groups_to_group_user', NULL)


statement ok
INSERT INTO migrations VALUES (42, '2018_01_18_130700_change_group_user_add_foreign_keys', NULL)


statement ok
INSERT INTO migrations VALUES (43, '2018_01_18_133000_change_notifications_columns', NULL)


statement ok
INSERT INTO migrations VALUES (44, '2018_01_18_133100_change_notifications_add_foreign_keys', NULL)


statement ok
INSERT INTO migrations VALUES (45, '2018_01_18_134400_change_password_tokens_rename_id_to_token', NULL)


statement ok
INSERT INTO migrations VALUES (46, '2018_01_18_134500_change_password_tokens_add_foreign_keys', NULL)


statement ok
INSERT INTO migrations VALUES (47, '2018_01_18_134600_change_password_tokens_created_at_to_datetime', NULL)


statement ok
INSERT INTO migrations VALUES (48, '2018_01_18_135000_change_posts_rename_columns', NULL)


statement ok
INSERT INTO migrations VALUES (49, '2018_01_18_135100_change_posts_add_foreign_keys', NULL)


statement ok
INSERT INTO migrations VALUES (50, '2018_01_30_112238_add_fulltext_index_to_discussions_title', NULL)


statement ok
INSERT INTO migrations VALUES (51, '2018_01_30_220100_create_post_user_table', NULL)


statement ok
INSERT INTO migrations VALUES (52, '2018_01_30_222900_change_users_rename_columns', NULL)


statement ok
INSERT INTO migrations VALUES (55, '2018_09_15_041340_add_users_indicies', NULL)


statement ok
INSERT INTO migrations VALUES (56, '2018_09_15_041828_add_discussions_indicies', NULL)


statement ok
INSERT INTO migrations VALUES (57, '2018_09_15_043337_add_notifications_indices', NULL)


statement ok
INSERT INTO migrations VALUES (58, '2018_09_15_043621_add_posts_indices', NULL)


statement ok
INSERT INTO migrations VALUES (59, '2018_09_22_004100_change_registration_tokens_columns', NULL)


statement ok
INSERT INTO migrations VALUES (60, '2018_09_22_004200_create_login_providers_table', NULL)


statement ok
INSERT INTO migrations VALUES (61, '2018_10_08_144700_add_shim_prefix_to_group_icons', NULL)


statement ok
INSERT INTO migrations VALUES (62, '2019_10_12_195349_change_posts_add_discussion_foreign_key', NULL)


statement ok
INSERT INTO migrations VALUES (63, '2020_03_19_134512_change_discussions_default_comment_count', NULL)


statement ok
INSERT INTO migrations VALUES (64, '2020_04_21_130500_change_permission_groups_add_is_hidden', NULL)


statement ok
INSERT INTO migrations VALUES (65, '2021_03_02_040000_change_access_tokens_add_type', NULL)


statement ok
INSERT INTO migrations VALUES (66, '2021_03_02_040500_change_access_tokens_add_id', NULL)


statement ok
INSERT INTO migrations VALUES (67, '2021_03_02_041000_change_access_tokens_add_title_ip_agent', NULL)


statement ok
INSERT INTO migrations VALUES (68, '2021_04_18_040500_change_migrations_add_id_primary_key', NULL)


statement ok
INSERT INTO migrations VALUES (69, '2021_04_18_145100_change_posts_content_column_to_mediumtext', NULL)


statement ok
SET FOREIGN_KEY_CHECKS = 1


query  nosort
SELECT migration FROM migrations WHERE (extension IS NULL) ORDER BY migration ASC
----
67 values hashing to 67efd9d8d7c803246ee76e67f00a0a28

query  rowsort
SELECT EXISTS (SELECT * FROM `groups` WHERE (id = ?)) AS `exists`
? = 1
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO `groups` (id, name_singular, name_plural, color, icon) VALUES (?, ?, ?, ?, ?)
? = 1
? = Admin
? = Admins
? = #B72A2A
? = fas fa-wrench
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM `groups` WHERE (id = ?)) AS `exists`
? = 2
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO `groups` (id, name_singular, name_plural, color, icon) VALUES (?, ?, ?, ?, ?)
? = 2
? = Guest
? = Guests
? = NULL
? = NULL
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM `groups` WHERE (id = ?)) AS `exists`
? = 3
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO `groups` (id, name_singular, name_plural, color, icon) VALUES (?, ?, ?, ?, ?)
? = 3
? = Member
? = Members
? = NULL
? = NULL
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM `groups` WHERE (id = ?)) AS `exists`
? = 4
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO `groups` (id, name_singular, name_plural, color, icon) VALUES (?, ?, ?, ?, ?)
? = 4
? = Mod
? = Mods
? = #80349E
? = fas fa-bolt
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2018_07_21_000000_seed_default_groups
? = NULL
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM `groups` WHERE (id = ?)) AS `exists`
? = 2
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
SELECT EXISTS (SELECT * FROM group_permission WHERE ((permission = ?) AND (group_id = ?))) AS `exists`
? = viewForum
? = 2
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO group_permission (permission, group_id) VALUES (?, ?)
? = viewForum
? = 2
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM `groups` WHERE (id = ?)) AS `exists`
? = 3
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
SELECT EXISTS (SELECT * FROM group_permission WHERE ((permission = ?) AND (group_id = ?))) AS `exists`
? = startDiscussion
? = 3
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO group_permission (permission, group_id) VALUES (?, ?)
? = startDiscussion
? = 3
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM `groups` WHERE (id = ?)) AS `exists`
? = 3
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
SELECT EXISTS (SELECT * FROM group_permission WHERE ((permission = ?) AND (group_id = ?))) AS `exists`
? = discussion.reply
? = 3
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO group_permission (permission, group_id) VALUES (?, ?)
? = discussion.reply
? = 3
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM `groups` WHERE (id = ?)) AS `exists`
? = 3
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
SELECT EXISTS (SELECT * FROM group_permission WHERE ((permission = ?) AND (group_id = ?))) AS `exists`
? = searchUsers
? = 3
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO group_permission (permission, group_id) VALUES (?, ?)
? = searchUsers
? = 3
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM `groups` WHERE (id = ?)) AS `exists`
? = 4
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
SELECT EXISTS (SELECT * FROM group_permission WHERE ((permission = ?) AND (group_id = ?))) AS `exists`
? = discussion.hide
? = 4
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO group_permission (permission, group_id) VALUES (?, ?)
? = discussion.hide
? = 4
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM `groups` WHERE (id = ?)) AS `exists`
? = 4
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
SELECT EXISTS (SELECT * FROM group_permission WHERE ((permission = ?) AND (group_id = ?))) AS `exists`
? = discussion.editPosts
? = 4
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO group_permission (permission, group_id) VALUES (?, ?)
? = discussion.editPosts
? = 4
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM `groups` WHERE (id = ?)) AS `exists`
? = 4
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
SELECT EXISTS (SELECT * FROM group_permission WHERE ((permission = ?) AND (group_id = ?))) AS `exists`
? = discussion.hidePosts
? = 4
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO group_permission (permission, group_id) VALUES (?, ?)
? = discussion.hidePosts
? = 4
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM `groups` WHERE (id = ?)) AS `exists`
? = 4
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
SELECT EXISTS (SELECT * FROM group_permission WHERE ((permission = ?) AND (group_id = ?))) AS `exists`
? = discussion.rename
? = 4
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO group_permission (permission, group_id) VALUES (?, ?)
? = discussion.rename
? = 4
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM `groups` WHERE (id = ?)) AS `exists`
? = 4
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
SELECT EXISTS (SELECT * FROM group_permission WHERE ((permission = ?) AND (group_id = ?))) AS `exists`
? = discussion.viewIpsPosts
? = 4
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO group_permission (permission, group_id) VALUES (?, ?)
? = discussion.viewIpsPosts
? = 4
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM `groups` WHERE (id = ?)) AS `exists`
? = 4
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
SELECT EXISTS (SELECT * FROM group_permission WHERE ((permission = ?) AND (group_id = ?))) AS `exists`
? = user.viewLastSeenAt
? = 4
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO group_permission (permission, group_id) VALUES (?, ?)
? = user.viewLastSeenAt
? = 4
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2018_07_21_000100_seed_default_group_permissions
? = NULL
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
UPDATE group_permission SET permission = REPLACE(permission, 'viewDiscussions', 'viewForum') WHERE (permission LIKE ?)
? = %viewDiscussions
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
UPDATE group_permission SET permission = ? WHERE (permission = ?)
? = searchUsers
? = viewUserList
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2021_05_10_000000_rename_permissions
? = NULL
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM settings WHERE (`key` = ?)) AS `exists`
? = version
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO settings (`key`, value) VALUES (?, ?)
? = version
? = 1.0.4
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM settings WHERE (`key` = ?)) AS `exists`
? = allow_post_editing
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO settings (`key`, value) VALUES (?, ?)
? = allow_post_editing
? = reply
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM settings WHERE (`key` = ?)) AS `exists`
? = allow_renaming
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO settings (`key`, value) VALUES (?, ?)
? = allow_renaming
? = 10
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM settings WHERE (`key` = ?)) AS `exists`
? = allow_sign_up
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO settings (`key`, value) VALUES (?, ?)
? = allow_sign_up
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM settings WHERE (`key` = ?)) AS `exists`
? = custom_less
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO settings (`key`, value) VALUES (?, ?)
? = custom_less
? = (empty)
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM settings WHERE (`key` = ?)) AS `exists`
? = default_locale
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO settings (`key`, value) VALUES (?, ?)
? = default_locale
? = en
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM settings WHERE (`key` = ?)) AS `exists`
? = default_route
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO settings (`key`, value) VALUES (?, ?)
? = default_route
? = /all
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM settings WHERE (`key` = ?)) AS `exists`
? = extensions_enabled
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO settings (`key`, value) VALUES (?, ?)
? = extensions_enabled
? = []
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM settings WHERE (`key` = ?)) AS `exists`
? = forum_title
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO settings (`key`, value) VALUES (?, ?)
? = forum_title
? = A new Flarum forum
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM settings WHERE (`key` = ?)) AS `exists`
? = forum_description
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO settings (`key`, value) VALUES (?, ?)
? = forum_description
? = (empty)
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM settings WHERE (`key` = ?)) AS `exists`
? = mail_driver
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO settings (`key`, value) VALUES (?, ?)
? = mail_driver
? = mail
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM settings WHERE (`key` = ?)) AS `exists`
? = mail_from
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO settings (`key`, value) VALUES (?, ?)
? = mail_from
? = noreply@localhost
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM settings WHERE (`key` = ?)) AS `exists`
? = theme_colored_header
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO settings (`key`, value) VALUES (?, ?)
? = theme_colored_header
? = 0
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM settings WHERE (`key` = ?)) AS `exists`
? = theme_dark_mode
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO settings (`key`, value) VALUES (?, ?)
? = theme_dark_mode
? = 0
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM settings WHERE (`key` = ?)) AS `exists`
? = theme_primary_color
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO settings (`key`, value) VALUES (?, ?)
? = theme_primary_color
? = #4D698E
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM settings WHERE (`key` = ?)) AS `exists`
? = theme_secondary_color
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO settings (`key`, value) VALUES (?, ?)
? = theme_secondary_color
? = #4D698E
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM settings WHERE (`key` = ?)) AS `exists`
? = welcome_message
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO settings (`key`, value) VALUES (?, ?)
? = welcome_message
? = Enjoy your new forum! Hop over to discuss.flarum.org if you have any questions, or to join our community!
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM settings WHERE (`key` = ?)) AS `exists`
? = welcome_title
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO settings (`key`, value) VALUES (?, ?)
? = welcome_title
? = Welcome to Flarum
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
INSERT INTO users (username, email, password, joined_at, is_email_confirmed) VALUES (?, ?, ?, ?, ?)
? = admin
? = admin@example.com
? = $2y$10$SGmRiOyQ43Ut0W2fkPyaquFT8qSpObTYnHYONzOBa/fHPnVhQ2ci.
? = 2021-10-13 15:06:45
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
INSERT INTO group_user (user_id, group_id) VALUES (?, ?)
? = 1
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  nosort
SELECT migration FROM migrations WHERE (extension = ?) ORDER BY migration ASC
? = flarum-approval
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
ALTER TABLE discussions ADD COLUMN is_approved TINYINT(1) NOT NULL DEFAULT '1'


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2015_09_21_011527_add_is_approved_to_discussions
? = flarum-approval
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
ALTER TABLE posts ADD COLUMN is_approved TINYINT(1) NOT NULL DEFAULT '1'


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2015_09_21_011706_add_is_approved_to_posts
? = flarum-approval
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM group_permission WHERE ((group_id = ?) AND (permission = ?))) AS `exists`
? = 3
? = discussion.startWithoutApproval
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
SELECT EXISTS (SELECT * FROM `groups` WHERE (id = ?)) AS `exists`
? = 3
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
INSERT INTO group_permission (group_id, permission) VALUES (?, ?)
? = 3
? = discussion.startWithoutApproval
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM group_permission WHERE ((group_id = ?) AND (permission = ?))) AS `exists`
? = 3
? = discussion.replyWithoutApproval
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
SELECT EXISTS (SELECT * FROM `groups` WHERE (id = ?)) AS `exists`
? = 3
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
INSERT INTO group_permission (group_id, permission) VALUES (?, ?)
? = 3
? = discussion.replyWithoutApproval
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM group_permission WHERE ((group_id = ?) AND (permission = ?))) AS `exists`
? = 4
? = discussion.approvePosts
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
SELECT EXISTS (SELECT * FROM `groups` WHERE (id = ?)) AS `exists`
? = 4
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
INSERT INTO group_permission (group_id, permission) VALUES (?, ?)
? = 4
? = discussion.approvePosts
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2017_07_22_000000_add_default_permissions
? = flarum-approval
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  nosort
SELECT migration FROM migrations WHERE (extension = ?) ORDER BY migration ASC
? = flarum-emoji
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT id, content FROM posts WHERE (content LIKE ?)
? = %<EMOJI%
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2018_09_29_060444_replace_emoji_shorcuts_with_unicode
? = flarum-emoji
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  nosort
SELECT migration FROM migrations WHERE (extension = ?) ORDER BY migration ASC
? = flarum-flags
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
ALTER TABLE users ADD COLUMN flags_read_time DATETIME NULL


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2015_09_02_000000_add_flags_read_time_to_users_table
? = flarum-flags
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
CREATE TABLE flags (id INT UNSIGNED NOT NULL AUTO_INCREMENT, post_id INT UNSIGNED NOT NULL, type VARCHAR(255) NOT NULL, user_id INT UNSIGNED NULL, reason VARCHAR(255) NULL, reason_detail VARCHAR(255) NULL, time DATETIME NOT NULL, PRIMARY KEY (id))


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2015_09_02_000000_create_flags_table
? = flarum-flags
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM group_permission WHERE ((group_id = ?) AND (permission = ?))) AS `exists`
? = 3
? = discussion.flagPosts
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
SELECT EXISTS (SELECT * FROM `groups` WHERE (id = ?)) AS `exists`
? = 3
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
INSERT INTO group_permission (group_id, permission) VALUES (?, ?)
? = 3
? = discussion.flagPosts
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM group_permission WHERE ((group_id = ?) AND (permission = ?))) AS `exists`
? = 4
? = discussion.viewFlags
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
SELECT EXISTS (SELECT * FROM `groups` WHERE (id = ?)) AS `exists`
? = 4
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
INSERT INTO group_permission (group_id, permission) VALUES (?, ?)
? = 4
? = discussion.viewFlags
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2017_07_22_000000_add_default_permissions
? = flarum-flags
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  nosort
SELECT NON_UNIQUE AS Non_Unique, INDEX_NAME AS Key_name, COLUMN_NAME AS Column_Name, SUB_PART AS Sub_Part, INDEX_TYPE AS Index_Type FROM information_schema.STATISTICS WHERE ((TABLE_NAME = 'flags') AND (TABLE_SCHEMA = 'test')) ORDER BY SEQ_IN_INDEX ASC
----
5 values hashing to 520e2ac4600132a5f8d39668680cdf13

query  rowsort
SELECT ENGINE, AUTO_INCREMENT, TABLE_COLLATION, TABLE_COMMENT, CREATE_OPTIONS FROM information_schema.TABLES WHERE ((TABLE_TYPE = 'BASE TABLE') AND ((TABLE_SCHEMA = DATABASE()) AND (TABLE_NAME = 'flags')))
----
5 values hashing to 31b946ee25fb79d961d791b1fc2e5573

query  nosort
SELECT NON_UNIQUE AS Non_Unique, INDEX_NAME AS Key_name, COLUMN_NAME AS Column_Name, SUB_PART AS Sub_Part, INDEX_TYPE AS Index_Type FROM information_schema.STATISTICS WHERE ((TABLE_NAME = 'flags') AND (TABLE_SCHEMA = 'test')) ORDER BY SEQ_IN_INDEX ASC
----
5 values hashing to 520e2ac4600132a5f8d39668680cdf13

query  rowsort
SELECT ENGINE, AUTO_INCREMENT, TABLE_COLLATION, TABLE_COMMENT, CREATE_OPTIONS FROM information_schema.TABLES WHERE ((TABLE_TYPE = 'BASE TABLE') AND ((TABLE_SCHEMA = DATABASE()) AND (TABLE_NAME = 'flags')))
----
5 values hashing to 31b946ee25fb79d961d791b1fc2e5573

statement ok
ALTER TABLE flags CHANGE COLUMN time created_at DATETIME NOT NULL


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2018_06_27_101500_change_flags_rename_time_to_created_at
? = flarum-flags
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
DELETE FROM flags WHERE (NOT EXISTS (SELECT 1 FROM posts WHERE (id = post_id)))


query  rowsort
UPDATE flags SET user_id = ? WHERE (NOT EXISTS (SELECT 1 FROM users WHERE (id = user_id)))
? = NULL
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
ALTER TABLE flags ADD CONSTRAINT flags_post_id_foreign FOREIGN KEY (post_id) REFERENCES posts (id) ON DELETE CASCADE


statement ok
ALTER TABLE flags ADD CONSTRAINT flags_user_id_foreign FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2018_06_27_101600_change_flags_add_foreign_keys
? = flarum-flags
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  nosort
SELECT NON_UNIQUE AS Non_Unique, INDEX_NAME AS Key_name, COLUMN_NAME AS Column_Name, SUB_PART AS Sub_Part, INDEX_TYPE AS Index_Type FROM information_schema.STATISTICS WHERE ((TABLE_NAME = 'users') AND (TABLE_SCHEMA = 'test')) ORDER BY SEQ_IN_INDEX ASC
----
35 values hashing to 687601f37253030159cf53b3068fdc58

query  rowsort
SELECT ENGINE, AUTO_INCREMENT, TABLE_COLLATION, TABLE_COMMENT, CREATE_OPTIONS FROM information_schema.TABLES WHERE ((TABLE_TYPE = 'BASE TABLE') AND ((TABLE_SCHEMA = DATABASE()) AND (TABLE_NAME = 'users')))
----
5 values hashing to 7fb57a26f53b98b4b742fd13df3253ae

query  nosort
SELECT NON_UNIQUE AS Non_Unique, INDEX_NAME AS Key_name, COLUMN_NAME AS Column_Name, SUB_PART AS Sub_Part, INDEX_TYPE AS Index_Type FROM information_schema.STATISTICS WHERE ((TABLE_NAME = 'users') AND (TABLE_SCHEMA = 'test')) ORDER BY SEQ_IN_INDEX ASC
----
35 values hashing to 687601f37253030159cf53b3068fdc58

query  rowsort
SELECT ENGINE, AUTO_INCREMENT, TABLE_COLLATION, TABLE_COMMENT, CREATE_OPTIONS FROM information_schema.TABLES WHERE ((TABLE_TYPE = 'BASE TABLE') AND ((TABLE_SCHEMA = DATABASE()) AND (TABLE_NAME = 'users')))
----
5 values hashing to 7fb57a26f53b98b4b742fd13df3253ae

statement ok
ALTER TABLE users CHANGE COLUMN flags_read_time read_flags_at DATETIME DEFAULT NULL


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2018_06_27_105100_change_users_rename_flags_read_time_to_read_flags_at
? = flarum-flags
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
ALTER TABLE flags ADD KEY flags_created_at_index (created_at)


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2018_09_15_043621_add_flags_indices
? = flarum-flags
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  nosort
SELECT NON_UNIQUE AS Non_Unique, INDEX_NAME AS Key_name, COLUMN_NAME AS Column_Name, SUB_PART AS Sub_Part, INDEX_TYPE AS Index_Type FROM information_schema.STATISTICS WHERE ((TABLE_NAME = 'flags') AND (TABLE_SCHEMA = 'test')) ORDER BY SEQ_IN_INDEX ASC
----
20 values hashing to bb42d3602da3ad72965ca1be29b33614

query  rowsort
SELECT ENGINE, AUTO_INCREMENT, TABLE_COLLATION, TABLE_COMMENT, CREATE_OPTIONS FROM information_schema.TABLES WHERE ((TABLE_TYPE = 'BASE TABLE') AND ((TABLE_SCHEMA = DATABASE()) AND (TABLE_NAME = 'flags')))
----
5 values hashing to 31b946ee25fb79d961d791b1fc2e5573

statement ok
ALTER TABLE flags CHANGE COLUMN reason_detail reason_detail TEXT CHARACTER SET utf8mb4 DEFAULT NULL COLLATE utf8mb4_unicode_ci


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2019_10_22_000000_change_reason_text_col_type
? = flarum-flags
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  nosort
SELECT migration FROM migrations WHERE (extension = ?) ORDER BY migration ASC
? = flarum-likes
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
CREATE TABLE posts_likes (post_id INT UNSIGNED NOT NULL, user_id INT UNSIGNED NOT NULL)


statement ok
ALTER TABLE posts_likes ADD PRIMARY KEY posts_likes_post_id_user_id_primary (post_id, user_id)


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2015_05_11_000000_create_posts_likes_table
? = flarum-likes
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM group_permission WHERE ((group_id = ?) AND (permission = ?))) AS `exists`
? = 3
? = discussion.likePosts
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
SELECT EXISTS (SELECT * FROM `groups` WHERE (id = ?)) AS `exists`
? = 3
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
INSERT INTO group_permission (group_id, permission) VALUES (?, ?)
? = 3
? = discussion.likePosts
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2015_09_04_000000_add_default_like_permissions
? = flarum-likes
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
RENAME TABLE posts_likes TO post_likes


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2018_06_27_100600_rename_posts_likes_to_post_likes
? = flarum-likes
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
DELETE FROM post_likes WHERE ((NOT EXISTS (SELECT 1 FROM posts WHERE (id = post_id))) OR (NOT EXISTS (SELECT 1 FROM users WHERE (id = user_id))))


statement ok
ALTER TABLE post_likes ADD CONSTRAINT post_likes_post_id_foreign FOREIGN KEY (post_id) REFERENCES posts (id) ON DELETE CASCADE


statement ok
ALTER TABLE post_likes ADD CONSTRAINT post_likes_user_id_foreign FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2018_06_27_100700_change_post_likes_add_foreign_keys
? = flarum-likes
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
ALTER TABLE post_likes ADD COLUMN created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2021_05_10_094200_add_created_at_to_post_likes_table
? = flarum-likes
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  nosort
SELECT migration FROM migrations WHERE (extension = ?) ORDER BY migration ASC
? = flarum-lock
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
ALTER TABLE discussions ADD COLUMN is_locked TINYINT(1) NOT NULL DEFAULT '0'


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2015_02_24_000000_add_locked_to_discussions
? = flarum-lock
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM group_permission WHERE ((group_id = ?) AND (permission = ?))) AS `exists`
? = 4
? = discussion.lock
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
SELECT EXISTS (SELECT * FROM `groups` WHERE (id = ?)) AS `exists`
? = 4
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
INSERT INTO group_permission (group_id, permission) VALUES (?, ?)
? = 4
? = discussion.lock
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2017_07_22_000000_add_default_permissions
? = flarum-lock
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
ALTER TABLE discussions ADD KEY discussions_is_locked_index (is_locked)


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2018_09_15_043621_add_discussions_indices
? = flarum-lock
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  nosort
SELECT migration FROM migrations WHERE (extension = ?) ORDER BY migration ASC
? = flarum-markdown
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM settings WHERE (`key` = ?)) AS `exists`
? = flarum-markdown.mdarea
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO settings (`key`, value) VALUES (?, ?)
? = flarum-markdown.mdarea
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2021_03_25_000000_default_settings
? = flarum-markdown
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  nosort
SELECT migration FROM migrations WHERE (extension = ?) ORDER BY migration ASC
? = flarum-mentions
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
CREATE TABLE mentions_posts (post_id INT UNSIGNED NOT NULL, mentions_id INT UNSIGNED NOT NULL)


statement ok
ALTER TABLE mentions_posts ADD PRIMARY KEY mentions_posts_post_id_mentions_id_primary (post_id, mentions_id)


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2015_05_11_000000_create_mentions_posts_table
? = flarum-mentions
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
CREATE TABLE mentions_users (post_id INT UNSIGNED NOT NULL, mentions_id INT UNSIGNED NOT NULL)


statement ok
ALTER TABLE mentions_users ADD PRIMARY KEY mentions_users_post_id_mentions_id_primary (post_id, mentions_id)


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2015_05_11_000000_create_mentions_users_table
? = flarum-mentions
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
RENAME TABLE mentions_posts TO post_mentions_post


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2018_06_27_102000_rename_mentions_posts_to_post_mentions_post
? = flarum-mentions
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
RENAME TABLE mentions_users TO post_mentions_user


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2018_06_27_102100_rename_mentions_users_to_post_mentions_user
? = flarum-mentions
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  nosort
SELECT NON_UNIQUE AS Non_Unique, INDEX_NAME AS Key_name, COLUMN_NAME AS Column_Name, SUB_PART AS Sub_Part, INDEX_TYPE AS Index_Type FROM information_schema.STATISTICS WHERE ((TABLE_NAME = 'post_mentions_post') AND (TABLE_SCHEMA = 'test')) ORDER BY SEQ_IN_INDEX ASC
----
10 values hashing to 1b5cbf674d415f16480be6c9405ebbba

query  rowsort
SELECT ENGINE, AUTO_INCREMENT, TABLE_COLLATION, TABLE_COMMENT, CREATE_OPTIONS FROM information_schema.TABLES WHERE ((TABLE_TYPE = 'BASE TABLE') AND ((TABLE_SCHEMA = DATABASE()) AND (TABLE_NAME = 'post_mentions_post')))
----
5 values hashing to 31b946ee25fb79d961d791b1fc2e5573

query  nosort
SELECT NON_UNIQUE AS Non_Unique, INDEX_NAME AS Key_name, COLUMN_NAME AS Column_Name, SUB_PART AS Sub_Part, INDEX_TYPE AS Index_Type FROM information_schema.STATISTICS WHERE ((TABLE_NAME = 'post_mentions_post') AND (TABLE_SCHEMA = 'test')) ORDER BY SEQ_IN_INDEX ASC
----
10 values hashing to 1b5cbf674d415f16480be6c9405ebbba

query  rowsort
SELECT ENGINE, AUTO_INCREMENT, TABLE_COLLATION, TABLE_COMMENT, CREATE_OPTIONS FROM information_schema.TABLES WHERE ((TABLE_TYPE = 'BASE TABLE') AND ((TABLE_SCHEMA = DATABASE()) AND (TABLE_NAME = 'post_mentions_post')))
----
5 values hashing to 31b946ee25fb79d961d791b1fc2e5573

statement ok
ALTER TABLE post_mentions_post CHANGE COLUMN mentions_id mentions_post_id INT UNSIGNED NOT NULL


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2018_06_27_102200_change_post_mentions_post_rename_mentions_id_to_mentions_post_id
? = flarum-mentions
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
DELETE FROM post_mentions_post WHERE ((NOT EXISTS (SELECT 1 FROM posts WHERE (id = post_id))) OR (NOT EXISTS (SELECT 1 FROM posts WHERE (id = mentions_post_id))))


statement ok
ALTER TABLE post_mentions_post ADD CONSTRAINT post_mentions_post_post_id_foreign FOREIGN KEY (post_id) REFERENCES posts (id) ON DELETE CASCADE


statement ok
ALTER TABLE post_mentions_post ADD CONSTRAINT post_mentions_post_mentions_post_id_foreign FOREIGN KEY (mentions_post_id) REFERENCES posts (id) ON DELETE CASCADE


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2018_06_27_102300_change_post_mentions_post_add_foreign_keys
? = flarum-mentions
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  nosort
SELECT NON_UNIQUE AS Non_Unique, INDEX_NAME AS Key_name, COLUMN_NAME AS Column_Name, SUB_PART AS Sub_Part, INDEX_TYPE AS Index_Type FROM information_schema.STATISTICS WHERE ((TABLE_NAME = 'post_mentions_user') AND (TABLE_SCHEMA = 'test')) ORDER BY SEQ_IN_INDEX ASC
----
10 values hashing to 1b5cbf674d415f16480be6c9405ebbba

query  rowsort
SELECT ENGINE, AUTO_INCREMENT, TABLE_COLLATION, TABLE_COMMENT, CREATE_OPTIONS FROM information_schema.TABLES WHERE ((TABLE_TYPE = 'BASE TABLE') AND ((TABLE_SCHEMA = DATABASE()) AND (TABLE_NAME = 'post_mentions_user')))
----
5 values hashing to 31b946ee25fb79d961d791b1fc2e5573

query  nosort
SELECT NON_UNIQUE AS Non_Unique, INDEX_NAME AS Key_name, COLUMN_NAME AS Column_Name, SUB_PART AS Sub_Part, INDEX_TYPE AS Index_Type FROM information_schema.STATISTICS WHERE ((TABLE_NAME = 'post_mentions_user') AND (TABLE_SCHEMA = 'test')) ORDER BY SEQ_IN_INDEX ASC
----
10 values hashing to 1b5cbf674d415f16480be6c9405ebbba

query  rowsort
SELECT ENGINE, AUTO_INCREMENT, TABLE_COLLATION, TABLE_COMMENT, CREATE_OPTIONS FROM information_schema.TABLES WHERE ((TABLE_TYPE = 'BASE TABLE') AND ((TABLE_SCHEMA = DATABASE()) AND (TABLE_NAME = 'post_mentions_user')))
----
5 values hashing to 31b946ee25fb79d961d791b1fc2e5573

statement ok
ALTER TABLE post_mentions_user CHANGE COLUMN mentions_id mentions_user_id INT UNSIGNED NOT NULL


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2018_06_27_102400_change_post_mentions_user_rename_mentions_id_to_mentions_user_id
? = flarum-mentions
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
DELETE FROM post_mentions_user WHERE ((NOT EXISTS (SELECT 1 FROM posts WHERE (id = post_id))) OR (NOT EXISTS (SELECT 1 FROM users WHERE (id = mentions_user_id))))


statement ok
ALTER TABLE post_mentions_user ADD CONSTRAINT post_mentions_user_post_id_foreign FOREIGN KEY (post_id) REFERENCES posts (id) ON DELETE CASCADE


statement ok
ALTER TABLE post_mentions_user ADD CONSTRAINT post_mentions_user_mentions_user_id_foreign FOREIGN KEY (mentions_user_id) REFERENCES users (id) ON DELETE CASCADE


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2018_06_27_102500_change_post_mentions_user_add_foreign_keys
? = flarum-mentions
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM settings WHERE (`key` = ?)) AS `exists`
? = flarum-mentions.allow_username_format
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO settings (`key`, value) VALUES (?, ?)
? = flarum-mentions.allow_username_format
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2021_04_19_000000_set_default_settings
? = flarum-mentions
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  nosort
SELECT migration FROM migrations WHERE (extension = ?) ORDER BY migration ASC
? = flarum-sticky
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
ALTER TABLE discussions ADD COLUMN is_sticky TINYINT(1) NOT NULL DEFAULT '0'


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2015_02_24_000000_add_sticky_to_discussions
? = flarum-sticky
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM group_permission WHERE ((group_id = ?) AND (permission = ?))) AS `exists`
? = 4
? = discussion.sticky
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
SELECT EXISTS (SELECT * FROM `groups` WHERE (id = ?)) AS `exists`
? = 4
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
INSERT INTO group_permission (group_id, permission) VALUES (?, ?)
? = 4
? = discussion.sticky
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2017_07_22_000000_add_default_permissions
? = flarum-sticky
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
ALTER TABLE discussions ADD KEY discussions_is_sticky_created_at_index (is_sticky, created_at)


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2018_09_15_043621_add_discussions_indices
? = flarum-sticky
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
ALTER TABLE discussions ADD KEY discussions_is_sticky_last_posted_at_index (is_sticky, last_posted_at)


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2021_01_13_000000_add_discussion_last_posted_at_indices
? = flarum-sticky
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  nosort
SELECT migration FROM migrations WHERE (extension = ?) ORDER BY migration ASC
? = flarum-subscriptions
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
ALTER TABLE discussion_user ADD COLUMN subscription ENUM('follow', 'ignore') NULL


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2015_05_11_000000_add_subscription_to_users_discussions_table
? = flarum-subscriptions
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  nosort
SELECT migration FROM migrations WHERE (extension = ?) ORDER BY migration ASC
? = flarum-suspend
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
ALTER TABLE users ADD COLUMN suspended_until DATETIME NULL


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2015_05_11_000000_add_suspended_until_to_users_table
? = flarum-suspend
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  nosort
SELECT NON_UNIQUE AS Non_Unique, INDEX_NAME AS Key_name, COLUMN_NAME AS Column_Name, SUB_PART AS Sub_Part, INDEX_TYPE AS Index_Type FROM information_schema.STATISTICS WHERE ((TABLE_NAME = 'users') AND (TABLE_SCHEMA = 'test')) ORDER BY SEQ_IN_INDEX ASC
----
35 values hashing to 687601f37253030159cf53b3068fdc58

query  rowsort
SELECT ENGINE, AUTO_INCREMENT, TABLE_COLLATION, TABLE_COMMENT, CREATE_OPTIONS FROM information_schema.TABLES WHERE ((TABLE_TYPE = 'BASE TABLE') AND ((TABLE_SCHEMA = DATABASE()) AND (TABLE_NAME = 'users')))
----
5 values hashing to 7fb57a26f53b98b4b742fd13df3253ae

query  nosort
SELECT NON_UNIQUE AS Non_Unique, INDEX_NAME AS Key_name, COLUMN_NAME AS Column_Name, SUB_PART AS Sub_Part, INDEX_TYPE AS Index_Type FROM information_schema.STATISTICS WHERE ((TABLE_NAME = 'users') AND (TABLE_SCHEMA = 'test')) ORDER BY SEQ_IN_INDEX ASC
----
35 values hashing to 687601f37253030159cf53b3068fdc58

query  rowsort
SELECT ENGINE, AUTO_INCREMENT, TABLE_COLLATION, TABLE_COMMENT, CREATE_OPTIONS FROM information_schema.TABLES WHERE ((TABLE_TYPE = 'BASE TABLE') AND ((TABLE_SCHEMA = DATABASE()) AND (TABLE_NAME = 'users')))
----
5 values hashing to 7fb57a26f53b98b4b742fd13df3253ae

statement ok
ALTER TABLE users CHANGE COLUMN suspended_until suspend_until DATETIME DEFAULT NULL


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2015_09_14_000000_rename_suspended_until_column
? = flarum-suspend
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM group_permission WHERE ((group_id = ?) AND (permission = ?))) AS `exists`
? = 4
? = user.suspend
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
SELECT EXISTS (SELECT * FROM `groups` WHERE (id = ?)) AS `exists`
? = 4
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
INSERT INTO group_permission (group_id, permission) VALUES (?, ?)
? = 4
? = user.suspend
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2017_07_22_000000_add_default_permissions
? = flarum-suspend
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  nosort
SELECT NON_UNIQUE AS Non_Unique, INDEX_NAME AS Key_name, COLUMN_NAME AS Column_Name, SUB_PART AS Sub_Part, INDEX_TYPE AS Index_Type FROM information_schema.STATISTICS WHERE ((TABLE_NAME = 'users') AND (TABLE_SCHEMA = 'test')) ORDER BY SEQ_IN_INDEX ASC
----
35 values hashing to 687601f37253030159cf53b3068fdc58

query  rowsort
SELECT ENGINE, AUTO_INCREMENT, TABLE_COLLATION, TABLE_COMMENT, CREATE_OPTIONS FROM information_schema.TABLES WHERE ((TABLE_TYPE = 'BASE TABLE') AND ((TABLE_SCHEMA = DATABASE()) AND (TABLE_NAME = 'users')))
----
5 values hashing to 7fb57a26f53b98b4b742fd13df3253ae

query  nosort
SELECT NON_UNIQUE AS Non_Unique, INDEX_NAME AS Key_name, COLUMN_NAME AS Column_Name, SUB_PART AS Sub_Part, INDEX_TYPE AS Index_Type FROM information_schema.STATISTICS WHERE ((TABLE_NAME = 'users') AND (TABLE_SCHEMA = 'test')) ORDER BY SEQ_IN_INDEX ASC
----
35 values hashing to 687601f37253030159cf53b3068fdc58

query  rowsort
SELECT ENGINE, AUTO_INCREMENT, TABLE_COLLATION, TABLE_COMMENT, CREATE_OPTIONS FROM information_schema.TABLES WHERE ((TABLE_TYPE = 'BASE TABLE') AND ((TABLE_SCHEMA = DATABASE()) AND (TABLE_NAME = 'users')))
----
5 values hashing to 7fb57a26f53b98b4b742fd13df3253ae

statement ok
ALTER TABLE users CHANGE COLUMN suspend_until suspended_until DATETIME DEFAULT NULL


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2018_06_27_111400_change_users_rename_suspend_until_to_suspended_until
? = flarum-suspend
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  nosort
SELECT migration FROM migrations WHERE (extension = ?) ORDER BY migration ASC
? = flarum-tags
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
CREATE TABLE discussions_tags (discussion_id INT UNSIGNED NOT NULL, tag_id INT UNSIGNED NOT NULL)


statement ok
ALTER TABLE discussions_tags ADD PRIMARY KEY discussions_tags_discussion_id_tag_id_primary (discussion_id, tag_id)


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2015_02_24_000000_create_discussions_tags_table
? = flarum-tags
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
CREATE TABLE tags (id INT UNSIGNED NOT NULL AUTO_INCREMENT, name VARCHAR(100) NOT NULL, slug VARCHAR(100) NOT NULL, description TEXT NULL, color VARCHAR(50) NULL, background_path VARCHAR(100) NULL, background_mode VARCHAR(100) NULL, position INT NULL, parent_id INT UNSIGNED NULL, default_sort VARCHAR(50) NULL, is_restricted TINYINT(1) NOT NULL DEFAULT '0', is_hidden TINYINT(1) NOT NULL DEFAULT '0', discussions_count INT UNSIGNED NOT NULL DEFAULT '0', last_time DATETIME NULL, last_discussion_id INT UNSIGNED NULL, PRIMARY KEY (id))


query  rowsort
INSERT INTO tags (name, slug, color, position) VALUES (?, ?, ?, ?)
? = General
? = general
? = #888
? = 0
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2015_02_24_000000_create_tags_table
? = flarum-tags
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
CREATE TABLE users_tags (user_id INT UNSIGNED NOT NULL, tag_id INT UNSIGNED NOT NULL, read_time DATETIME NULL, is_hidden TINYINT(1) NOT NULL DEFAULT '0')


statement ok
ALTER TABLE users_tags ADD PRIMARY KEY users_tags_user_id_tag_id_primary (user_id, tag_id)


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2015_02_24_000000_create_users_tags_table
? = flarum-tags
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM settings WHERE (`key` = ?)) AS `exists`
? = flarum-tags.max_primary_tags
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO settings (`key`, value) VALUES (?, ?)
? = flarum-tags.max_primary_tags
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM settings WHERE (`key` = ?)) AS `exists`
? = flarum-tags.min_primary_tags
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO settings (`key`, value) VALUES (?, ?)
? = flarum-tags.min_primary_tags
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM settings WHERE (`key` = ?)) AS `exists`
? = flarum-tags.max_secondary_tags
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO settings (`key`, value) VALUES (?, ?)
? = flarum-tags.max_secondary_tags
? = 3
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM settings WHERE (`key` = ?)) AS `exists`
? = flarum-tags.min_secondary_tags
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO settings (`key`, value) VALUES (?, ?)
? = flarum-tags.min_secondary_tags
? = 0
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2015_02_24_000000_set_default_settings
? = flarum-tags
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  nosort
SELECT NON_UNIQUE AS Non_Unique, INDEX_NAME AS Key_name, COLUMN_NAME AS Column_Name, SUB_PART AS Sub_Part, INDEX_TYPE AS Index_Type FROM information_schema.STATISTICS WHERE ((TABLE_NAME = 'tags') AND (TABLE_SCHEMA = 'test')) ORDER BY SEQ_IN_INDEX ASC
----
5 values hashing to 520e2ac4600132a5f8d39668680cdf13

query  rowsort
SELECT ENGINE, AUTO_INCREMENT, TABLE_COLLATION, TABLE_COMMENT, CREATE_OPTIONS FROM information_schema.TABLES WHERE ((TABLE_TYPE = 'BASE TABLE') AND ((TABLE_SCHEMA = DATABASE()) AND (TABLE_NAME = 'tags')))
----
5 values hashing to 7fb57a26f53b98b4b742fd13df3253ae

statement ok
ALTER TABLE tags CHANGE COLUMN slug slug VARCHAR(100) CHARACTER SET utf8mb4 NOT NULL COLLATE utf8mb4_unicode_ci


statement ok
ALTER TABLE tags ADD UNIQUE KEY tags_slug_unique (slug)


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2015_10_19_061223_make_slug_unique
? = flarum-tags
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM group_permission WHERE ((group_id = ?) AND (permission = ?))) AS `exists`
? = 4
? = discussion.tag
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
SELECT EXISTS (SELECT * FROM `groups` WHERE (id = ?)) AS `exists`
? = 4
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
INSERT INTO group_permission (group_id, permission) VALUES (?, ?)
? = 4
? = discussion.tag
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2017_07_22_000000_add_default_permissions
? = flarum-tags
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  nosort
SELECT NON_UNIQUE AS Non_Unique, INDEX_NAME AS Key_name, COLUMN_NAME AS Column_Name, SUB_PART AS Sub_Part, INDEX_TYPE AS Index_Type FROM information_schema.STATISTICS WHERE ((TABLE_NAME = 'tags') AND (TABLE_SCHEMA = 'test')) ORDER BY SEQ_IN_INDEX ASC
----
10 values hashing to 1919615e15d84721efd62af58683e460

query  rowsort
SELECT ENGINE, AUTO_INCREMENT, TABLE_COLLATION, TABLE_COMMENT, CREATE_OPTIONS FROM information_schema.TABLES WHERE ((TABLE_TYPE = 'BASE TABLE') AND ((TABLE_SCHEMA = DATABASE()) AND (TABLE_NAME = 'tags')))
----
5 values hashing to 7fb57a26f53b98b4b742fd13df3253ae

query  nosort
SELECT NON_UNIQUE AS Non_Unique, INDEX_NAME AS Key_name, COLUMN_NAME AS Column_Name, SUB_PART AS Sub_Part, INDEX_TYPE AS Index_Type FROM information_schema.STATISTICS WHERE ((TABLE_NAME = 'tags') AND (TABLE_SCHEMA = 'test')) ORDER BY SEQ_IN_INDEX ASC
----
10 values hashing to 1919615e15d84721efd62af58683e460

query  rowsort
SELECT ENGINE, AUTO_INCREMENT, TABLE_COLLATION, TABLE_COMMENT, CREATE_OPTIONS FROM information_schema.TABLES WHERE ((TABLE_TYPE = 'BASE TABLE') AND ((TABLE_SCHEMA = DATABASE()) AND (TABLE_NAME = 'tags')))
----
5 values hashing to 7fb57a26f53b98b4b742fd13df3253ae

query  nosort
SELECT NON_UNIQUE AS Non_Unique, INDEX_NAME AS Key_name, COLUMN_NAME AS Column_Name, SUB_PART AS Sub_Part, INDEX_TYPE AS Index_Type FROM information_schema.STATISTICS WHERE ((TABLE_NAME = 'tags') AND (TABLE_SCHEMA = 'test')) ORDER BY SEQ_IN_INDEX ASC
----
10 values hashing to 1919615e15d84721efd62af58683e460

query  rowsort
SELECT ENGINE, AUTO_INCREMENT, TABLE_COLLATION, TABLE_COMMENT, CREATE_OPTIONS FROM information_schema.TABLES WHERE ((TABLE_TYPE = 'BASE TABLE') AND ((TABLE_SCHEMA = DATABASE()) AND (TABLE_NAME = 'tags')))
----
5 values hashing to 7fb57a26f53b98b4b742fd13df3253ae

query  nosort
SELECT NON_UNIQUE AS Non_Unique, INDEX_NAME AS Key_name, COLUMN_NAME AS Column_Name, SUB_PART AS Sub_Part, INDEX_TYPE AS Index_Type FROM information_schema.STATISTICS WHERE ((TABLE_NAME = 'tags') AND (TABLE_SCHEMA = 'test')) ORDER BY SEQ_IN_INDEX ASC
----
10 values hashing to 1919615e15d84721efd62af58683e460

query  rowsort
SELECT ENGINE, AUTO_INCREMENT, TABLE_COLLATION, TABLE_COMMENT, CREATE_OPTIONS FROM information_schema.TABLES WHERE ((TABLE_TYPE = 'BASE TABLE') AND ((TABLE_SCHEMA = DATABASE()) AND (TABLE_NAME = 'tags')))
----
5 values hashing to 7fb57a26f53b98b4b742fd13df3253ae

query  nosort
SELECT NON_UNIQUE AS Non_Unique, INDEX_NAME AS Key_name, COLUMN_NAME AS Column_Name, SUB_PART AS Sub_Part, INDEX_TYPE AS Index_Type FROM information_schema.STATISTICS WHERE ((TABLE_NAME = 'tags') AND (TABLE_SCHEMA = 'test')) ORDER BY SEQ_IN_INDEX ASC
----
10 values hashing to 1919615e15d84721efd62af58683e460

query  rowsort
SELECT ENGINE, AUTO_INCREMENT, TABLE_COLLATION, TABLE_COMMENT, CREATE_OPTIONS FROM information_schema.TABLES WHERE ((TABLE_TYPE = 'BASE TABLE') AND ((TABLE_SCHEMA = DATABASE()) AND (TABLE_NAME = 'tags')))
----
5 values hashing to 7fb57a26f53b98b4b742fd13df3253ae

query  nosort
SELECT NON_UNIQUE AS Non_Unique, INDEX_NAME AS Key_name, COLUMN_NAME AS Column_Name, SUB_PART AS Sub_Part, INDEX_TYPE AS Index_Type FROM information_schema.STATISTICS WHERE ((TABLE_NAME = 'tags') AND (TABLE_SCHEMA = 'test')) ORDER BY SEQ_IN_INDEX ASC
----
10 values hashing to 1919615e15d84721efd62af58683e460

query  rowsort
SELECT ENGINE, AUTO_INCREMENT, TABLE_COLLATION, TABLE_COMMENT, CREATE_OPTIONS FROM information_schema.TABLES WHERE ((TABLE_TYPE = 'BASE TABLE') AND ((TABLE_SCHEMA = DATABASE()) AND (TABLE_NAME = 'tags')))
----
5 values hashing to 7fb57a26f53b98b4b742fd13df3253ae

query  nosort
SELECT NON_UNIQUE AS Non_Unique, INDEX_NAME AS Key_name, COLUMN_NAME AS Column_Name, SUB_PART AS Sub_Part, INDEX_TYPE AS Index_Type FROM information_schema.STATISTICS WHERE ((TABLE_NAME = 'tags') AND (TABLE_SCHEMA = 'test')) ORDER BY SEQ_IN_INDEX ASC
----
10 values hashing to 1919615e15d84721efd62af58683e460

query  rowsort
SELECT ENGINE, AUTO_INCREMENT, TABLE_COLLATION, TABLE_COMMENT, CREATE_OPTIONS FROM information_schema.TABLES WHERE ((TABLE_TYPE = 'BASE TABLE') AND ((TABLE_SCHEMA = DATABASE()) AND (TABLE_NAME = 'tags')))
----
5 values hashing to 7fb57a26f53b98b4b742fd13df3253ae

statement ok
ALTER TABLE tags CHANGE COLUMN parent_id parent_id INT UNSIGNED DEFAULT NULL


statement ok
ALTER TABLE tags ADD COLUMN last_posted_user_id INT UNSIGNED NULL


statement ok
ALTER TABLE tags CHANGE COLUMN discussions_count discussion_count INT UNSIGNED DEFAULT 0 NOT NULL


statement ok
ALTER TABLE tags CHANGE COLUMN last_time last_posted_at DATETIME DEFAULT NULL


statement ok
ALTER TABLE tags CHANGE COLUMN last_discussion_id last_posted_discussion_id INT UNSIGNED DEFAULT NULL


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2018_06_27_085200_change_tags_columns
? = flarum-tags
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
UPDATE tags SET last_posted_user_id = (SELECT last_posted_user_id FROM discussions WHERE (id = last_posted_discussion_id)), last_posted_discussion_id = (SELECT id FROM discussions WHERE (id = last_posted_discussion_id))


statement ok
ALTER TABLE tags ADD CONSTRAINT tags_parent_id_foreign FOREIGN KEY (parent_id) REFERENCES tags (id) ON DELETE SET NULL


statement ok
ALTER TABLE tags ADD CONSTRAINT tags_last_posted_user_id_foreign FOREIGN KEY (last_posted_user_id) REFERENCES users (id) ON DELETE SET NULL


statement ok
ALTER TABLE tags ADD CONSTRAINT tags_last_posted_discussion_id_foreign FOREIGN KEY (last_posted_discussion_id) REFERENCES discussions (id) ON DELETE SET NULL


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2018_06_27_085300_change_tags_add_foreign_keys
? = flarum-tags
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
RENAME TABLE users_tags TO tag_user


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2018_06_27_090400_rename_users_tags_to_tag_user
? = flarum-tags
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  nosort
SELECT NON_UNIQUE AS Non_Unique, INDEX_NAME AS Key_name, COLUMN_NAME AS Column_Name, SUB_PART AS Sub_Part, INDEX_TYPE AS Index_Type FROM information_schema.STATISTICS WHERE ((TABLE_NAME = 'tag_user') AND (TABLE_SCHEMA = 'test')) ORDER BY SEQ_IN_INDEX ASC
----
10 values hashing to 7c04d77980d4b44d043f5be078d5407a

query  rowsort
SELECT ENGINE, AUTO_INCREMENT, TABLE_COLLATION, TABLE_COMMENT, CREATE_OPTIONS FROM information_schema.TABLES WHERE ((TABLE_TYPE = 'BASE TABLE') AND ((TABLE_SCHEMA = DATABASE()) AND (TABLE_NAME = 'tag_user')))
----
5 values hashing to 31b946ee25fb79d961d791b1fc2e5573

query  nosort
SELECT NON_UNIQUE AS Non_Unique, INDEX_NAME AS Key_name, COLUMN_NAME AS Column_Name, SUB_PART AS Sub_Part, INDEX_TYPE AS Index_Type FROM information_schema.STATISTICS WHERE ((TABLE_NAME = 'tag_user') AND (TABLE_SCHEMA = 'test')) ORDER BY SEQ_IN_INDEX ASC
----
10 values hashing to 7c04d77980d4b44d043f5be078d5407a

query  rowsort
SELECT ENGINE, AUTO_INCREMENT, TABLE_COLLATION, TABLE_COMMENT, CREATE_OPTIONS FROM information_schema.TABLES WHERE ((TABLE_TYPE = 'BASE TABLE') AND ((TABLE_SCHEMA = DATABASE()) AND (TABLE_NAME = 'tag_user')))
----
5 values hashing to 31b946ee25fb79d961d791b1fc2e5573

statement ok
ALTER TABLE tag_user CHANGE COLUMN read_time marked_as_read_at DATETIME DEFAULT NULL


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2018_06_27_100100_change_tag_user_rename_read_time_to_marked_as_read_at
? = flarum-tags
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
DELETE FROM tag_user WHERE ((NOT EXISTS (SELECT 1 FROM tags WHERE (id = tag_id))) OR (NOT EXISTS (SELECT 1 FROM users WHERE (id = user_id))))


statement ok
ALTER TABLE tag_user ADD CONSTRAINT tag_user_tag_id_foreign FOREIGN KEY (tag_id) REFERENCES tags (id) ON DELETE CASCADE


statement ok
ALTER TABLE tag_user ADD CONSTRAINT tag_user_user_id_foreign FOREIGN KEY (user_id) REFERENCES users (id) ON DELETE CASCADE


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2018_06_27_100200_change_tag_user_add_foreign_keys
? = flarum-tags
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
RENAME TABLE discussions_tags TO discussion_tag


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2018_06_27_103000_rename_discussions_tags_to_discussion_tag
? = flarum-tags
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
DELETE FROM discussion_tag WHERE ((NOT EXISTS (SELECT 1 FROM discussions WHERE (id = discussion_id))) OR (NOT EXISTS (SELECT 1 FROM tags WHERE (id = tag_id))))


statement ok
ALTER TABLE discussion_tag ADD CONSTRAINT discussion_tag_discussion_id_foreign FOREIGN KEY (discussion_id) REFERENCES discussions (id) ON DELETE CASCADE


statement ok
ALTER TABLE discussion_tag ADD CONSTRAINT discussion_tag_tag_id_foreign FOREIGN KEY (tag_id) REFERENCES tags (id) ON DELETE CASCADE


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2018_06_27_103100_add_discussion_tag_foreign_keys
? = flarum-tags
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
ALTER TABLE tags ADD COLUMN icon VARCHAR(100) NULL


query  rowsort
INSERT INTO migrations (migration, extension) VALUES (?, ?)
? = 2019_04_21_000000_add_icon_to_tags_table
? = flarum-tags
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT EXISTS (SELECT * FROM settings WHERE (`key` = ?)) AS `exists`
? = extensions_enabled
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
UPDATE settings SET `key` = ?, value = ? WHERE (`key` = ?)
? = extensions_enabled
? = ["flarum-approval","flarum-bbcode","flarum-emoji","flarum-lang-english","flarum-flags","flarum-likes","flarum-lock","flarum-markdown","flarum-mentions","flarum-statistics","flarum-sticky","flarum-subscriptions","flarum-suspend","flarum-tags"]
? = extensions_enabled
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
use `test`


statement ok
SET @@SESSION.sql_mode = 'NO_ENGINE_SUBSTITUTION'


query  rowsort
SELECT value, `key` FROM settings
----
48 values hashing to e11d463eff76c9eead8ddf378d651ea0

statement ok
use `test`


statement ok
SET @@SESSION.sql_mode = 'NO_ENGINE_SUBSTITUTION'


query  rowsort
SELECT value, `key` FROM settings
----
48 values hashing to e11d463eff76c9eead8ddf378d651ea0

query  rowsort
SELECT * FROM `groups` WHERE (id = ?)
? = 2
----
6 values hashing to f0430291addd0e1957e38dd1f9dfb258

query  rowsort
SELECT permission FROM group_permission WHERE group_id IN (?)
? = 2
----
1 values hashing to d37a8ef7c0ffa03b2cd2e78f77265bd8

query  rowsort
SELECT * FROM `groups` WHERE (is_hidden = ?)
? = 0
----
24 values hashing to ce33654381bec5bebce82d4bc9dd48c7

query  rowsort
 SELECT * FROM tags WHERE (((parent_id IS NULL) AND (position IS NOT NULL)) AND id IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))))) UNION DISTINCT SELECT * FROM tags WHERE (id IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL)))) AND ((parent_id IS NULL) AND (position IS NULL))) ORDER BY discussion_count DESC LIMIT 4
? = 1
? = 0
? = 1
? = 0
? = 1
? = 0
? = 1
? = 0
----
17 values hashing to ed0ef5a1a43a5ad286cd6ea9f7bd7880

query  rowsort
SELECT count(*) AS aggregate FROM tags WHERE ((tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))) AND (tags.position IS NOT NULL))
? = 1
? = 0
? = 1
? = 0
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
SELECT count(*) AS aggregate FROM tags WHERE ((tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))) AND (tags.position IS NULL))
? = 1
? = 0
? = 1
? = 0
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
SELECT count(*) AS aggregate FROM tags WHERE ((tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))) AND (tags.position IS NOT NULL))
? = 1
? = 1
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
SELECT count(*) AS aggregate FROM tags WHERE ((tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))) AND (tags.position IS NULL))
? = 1
? = 1
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
SELECT id FROM tags WHERE (is_hidden = ?)
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
use `test`


statement ok
SET @@SESSION.sql_mode = 'NO_ENGINE_SUBSTITUTION'


query  rowsort
SELECT value, `key` FROM settings
----
48 values hashing to e11d463eff76c9eead8ddf378d651ea0

query  rowsort
SELECT * FROM `groups` WHERE (id = ?)
? = 2
----
6 values hashing to f0430291addd0e1957e38dd1f9dfb258

query  rowsort
SELECT permission FROM group_permission WHERE group_id IN (?)
? = 2
----
1 values hashing to d37a8ef7c0ffa03b2cd2e78f77265bd8

query  rowsort
SELECT * FROM `groups` WHERE (is_hidden = ?)
? = 0
----
24 values hashing to ce33654381bec5bebce82d4bc9dd48c7

query  rowsort
 SELECT * FROM tags WHERE (((parent_id IS NULL) AND (position IS NOT NULL)) AND id IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))))) UNION DISTINCT SELECT * FROM tags WHERE (id IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL)))) AND ((parent_id IS NULL) AND (position IS NULL))) ORDER BY discussion_count DESC LIMIT 4
? = 1
? = 0
? = 1
? = 0
? = 1
? = 0
? = 1
? = 0
----
17 values hashing to ed0ef5a1a43a5ad286cd6ea9f7bd7880

query  rowsort
SELECT count(*) AS aggregate FROM tags WHERE ((tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))) AND (tags.position IS NOT NULL))
? = 1
? = 0
? = 1
? = 0
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
SELECT count(*) AS aggregate FROM tags WHERE ((tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))) AND (tags.position IS NULL))
? = 1
? = 0
? = 1
? = 0
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
SELECT count(*) AS aggregate FROM tags WHERE ((tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))) AND (tags.position IS NOT NULL))
? = 1
? = 1
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
SELECT count(*) AS aggregate FROM tags WHERE ((tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))) AND (tags.position IS NULL))
? = 1
? = 1
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
SELECT id FROM tags WHERE (is_hidden = ?)
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
use `test`


statement ok
SET @@SESSION.sql_mode = 'NO_ENGINE_SUBSTITUTION'


query  rowsort
SELECT value, `key` FROM settings
----
48 values hashing to e11d463eff76c9eead8ddf378d651ea0

query  rowsort
SELECT * FROM `groups` WHERE (id = ?)
? = 2
----
6 values hashing to f0430291addd0e1957e38dd1f9dfb258

query  rowsort
SELECT count(*) AS aggregate FROM users WHERE (username = ?)
? = test
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
SELECT count(*) AS aggregate FROM users WHERE (email = ?)
? = te@s.t
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
INSERT INTO users (username, email, password, joined_at) VALUES (?, ?, ?, ?)
? = test
? = te@s.t
? = $2y$10$/IJzQjCP83eMrSziiLHEzuGCdlgBlSzUCUjnXxhLbKUx7YwKrpNyC
? = 2021-10-13 15:06:55
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
INSERT INTO email_tokens (token, user_id, email, created_at) VALUES (?, ?, ?, ?)
? = HaOaOkhstoMIRhul0xMuATzWxHkq3VzbH0U7f3Hl
? = 2
? = te@s.t
? = 2021-10-13 15:06:55
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
UPDATE users SET is_email_confirmed = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
use `test`


statement ok
SET @@SESSION.sql_mode = 'NO_ENGINE_SUBSTITUTION'


query  rowsort
SELECT value, `key` FROM settings
----
48 values hashing to e11d463eff76c9eead8ddf378d651ea0

query  rowsort
SELECT * FROM users WHERE (username = ?) LIMIT 1
? = test
----
15 values hashing to d9652f9a4195fa30dccaf7c9f689a702

query  rowsort
INSERT INTO access_tokens (type, token, user_id, created_at, last_activity_at) VALUES (?, ?, ?, ?, ?)
? = session_remember
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
? = 2
? = 2021-10-13 15:06:56
? = 2021-10-13 15:06:56
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
UPDATE access_tokens SET last_ip_address = ?, last_user_agent = ? WHERE (id = ?)
? = NULL
? = curl/7.74.0
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:56
? = session
? = 2021-10-13 14:06:56
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to a7e5188b480aa2d15fda1de05e1be406

query  rowsort
SELECT * FROM users WHERE (id = ?) LIMIT 1
? = 2
----
15 values hashing to d9652f9a4195fa30dccaf7c9f689a702

statement ok
use `test`


statement ok
SET @@SESSION.sql_mode = 'NO_ENGINE_SUBSTITUTION'


query  rowsort
SELECT value, `key` FROM settings
----
48 values hashing to e11d463eff76c9eead8ddf378d651ea0

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:56
? = session
? = 2021-10-13 14:06:56
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to a7e5188b480aa2d15fda1de05e1be406

query  rowsort
UPDATE access_tokens SET last_user_agent = ? WHERE (id = ?)
? = NULL
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:56
? = session
? = 2021-10-13 14:06:56
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to 0fa44b653edb62f9a7552fe436d8d918

query  rowsort
SELECT * FROM users WHERE (users.id = ?) LIMIT 1
? = 2
----
15 values hashing to d9652f9a4195fa30dccaf7c9f689a702

query  rowsort
UPDATE users SET last_seen_at = ? WHERE (id = ?)
? = 2021-10-13 15:06:56
? = 2
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
UPDATE access_tokens SET last_ip_address = ?, last_user_agent = ? WHERE (id = ?)
? = 127.0.0.1
? = curl/7.74.0
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT `groups`.*, group_user.user_id AS pivot_user_id, group_user.group_id AS pivot_group_id FROM `groups` INNER JOIN group_user ON (`groups`.id = group_user.group_id) WHERE (group_user.user_id = ?)
? = 2
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT permission FROM group_permission WHERE group_id IN (?, ?)
? = 2
? = 3
----
8 values hashing to da3692841b36aa0ee123477b5cd2182d

query  rowsort
SELECT count(*) AS aggregate FROM tags WHERE ((tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))) AND (tags.position IS NOT NULL))
? = 1
? = 0
? = 1
? = 0
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
SELECT count(*) AS aggregate FROM tags WHERE ((tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))) AND (tags.position IS NULL))
? = 1
? = 0
? = 1
? = 0
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
SELECT id FROM tags WHERE (is_hidden = ?)
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
use `test`


statement ok
SET @@SESSION.sql_mode = 'NO_ENGINE_SUBSTITUTION'


query  rowsort
SELECT value, `key` FROM settings
----
48 values hashing to e11d463eff76c9eead8ddf378d651ea0

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:56
? = session
? = 2021-10-13 14:06:56
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to 3c1f6df227c0e257912b6ebb1067c924

query  rowsort
UPDATE access_tokens SET last_ip_address = ?, last_user_agent = ? WHERE (id = ?)
? = NULL
? = NULL
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:56
? = session
? = 2021-10-13 14:06:56
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to 0fa44b653edb62f9a7552fe436d8d918

query  rowsort
SELECT * FROM users WHERE (users.id = ?) LIMIT 1
? = 2
----
15 values hashing to 2e69aa78fdce5350d9d8a6d5e0c40ecf

query  rowsort
UPDATE access_tokens SET last_ip_address = ?, last_user_agent = ? WHERE (id = ?)
? = 127.0.0.1
? = curl/7.74.0
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT `groups`.*, group_user.user_id AS pivot_user_id, group_user.group_id AS pivot_group_id FROM `groups` INNER JOIN group_user ON (`groups`.id = group_user.group_id) WHERE (group_user.user_id = ?)
? = 2
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT permission FROM group_permission WHERE group_id IN (?, ?)
? = 2
? = 3
----
8 values hashing to da3692841b36aa0ee123477b5cd2182d

query  rowsort
SELECT EXISTS (SELECT * FROM posts WHERE ((user_id = ?) AND ((created_at >= ?) AND type IN (?, ?, ?, ?, ?)))) AS `exists`
? = 2
? = 2021-10-13 15:06:46
? = discussionLocked
? = discussionStickied
? = discussionTagged
? = comment
? = discussionRenamed
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
SELECT count(*) AS aggregate FROM tags WHERE ((tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))) AND (tags.position IS NOT NULL))
? = 1
? = 0
? = 1
? = 0
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
SELECT count(*) AS aggregate FROM tags WHERE ((tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))) AND (tags.position IS NULL))
? = 1
? = 0
? = 1
? = 0
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
SELECT * FROM tags WHERE id IN (?)
? = 1
----
17 values hashing to ed0ef5a1a43a5ad286cd6ea9f7bd7880

query  rowsort
INSERT INTO discussions (is_approved, title, slug, created_at, user_id, is_private) VALUES (?, ?, ?, ?, ?, ?)
? = 1
? = new post
? = new-post
? = 2021-10-13 15:06:56
? = 2
? = 0
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM discussion_tag WHERE (discussion_tag.discussion_id = ?)
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
INSERT INTO discussion_tag (discussion_id, tag_id) VALUES (?, ?)
? = 1
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT count(*) AS aggregate FROM tags WHERE ((tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))) AND (tags.position IS NOT NULL))
? = 1
? = 0
? = 1
? = 0
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
SELECT count(*) AS aggregate FROM tags WHERE ((tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))) AND (tags.position IS NULL))
? = 1
? = 0
? = 1
? = 0
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
SELECT * FROM discussions WHERE ((id = ?) AND (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))))) AND (((discussions.is_private = ?) OR ((discussions.is_approved = ?) AND ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))) AND (((discussions.hidden_at IS NULL) OR ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id))))) AND ((discussions.comment_count > ?) OR ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id))))))))) LIMIT 1
? = 1
? = 1
? = 0
? = 1
? = 0
? = 0
? = 0
? = 2
? = 1
? = 1
? = 2
? = 1
? = 1
? = 0
? = 2
? = 1
? = 1
----
19 values hashing to 7b60ac11e2ebfc86098fc727fea695ed

query  rowsort
SELECT * FROM discussions WHERE (discussions.id = ?) LIMIT 1
? = 1
----
19 values hashing to 7b60ac11e2ebfc86098fc727fea695ed

query  rowsort
SELECT tags.*, discussion_tag.discussion_id AS pivot_discussion_id, discussion_tag.tag_id AS pivot_tag_id FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussion_tag.discussion_id = ?)
? = 1
----
19 values hashing to bf1c1ca84e36655ac8ba27704fb3c425

query  rowsort
UPDATE discussions SET post_number_index = ? WHERE (id = ?)
? = 1
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
INSERT INTO posts (is_approved, created_at, discussion_id, user_id, type, ip_address, content, is_private, number) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
? = 1
? = 2021-10-13 15:06:56
? = 1
? = 2
? = comment
? = 127.0.0.1
? = <t><p>post body</p></t>
? = 0
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM post_mentions_user WHERE (post_mentions_user.post_id = ?)
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM users WHERE (0 = 1)
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM users WHERE (users.id = ?) LIMIT 1
? = 2
----
15 values hashing to 2e69aa78fdce5350d9d8a6d5e0c40ecf

query  rowsort
SELECT * FROM notifications WHERE ((type = ?) AND ((from_user_id = ?) AND ((subject_id = ?) AND (data IS NULL))))
? = userMentioned
? = 2
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM post_mentions_post WHERE (post_mentions_post.post_id = ?)
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM posts WHERE ((0 = 1) AND type IN (?, ?, ?, ?, ?))
? = discussionLocked
? = discussionStickied
? = discussionTagged
? = comment
? = discussionRenamed
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM posts WHERE (posts.id = ?) LIMIT 1
? = 1
----
14 values hashing to d23d698ab5fe74f2dff1571646953260

query  rowsort
SELECT * FROM discussions WHERE discussions.id IN (1)
----
19 values hashing to 34f40aae69d822e6c36002ff31a2eda8

query  rowsort
SELECT * FROM users WHERE users.id IN (2)
----
15 values hashing to 2e69aa78fdce5350d9d8a6d5e0c40ecf

query  rowsort
SELECT users.*, discussion_user.discussion_id AS pivot_discussion_id, discussion_user.user_id AS pivot_user_id FROM users INNER JOIN discussion_user ON (users.id = discussion_user.user_id) WHERE ((discussion_user.discussion_id = ?) AND ((users.id != ?) AND ((discussion_user.subscription = ?) AND (discussion_user.last_read_post_number IS NULL))))
? = 1
? = 2
? = follow
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM notifications WHERE ((type = ?) AND ((from_user_id = ?) AND ((subject_id = ?) AND (data = ?))))
? = newPost
? = 2
? = 1
? = {"postNumber":1}
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT count(*) AS aggregate FROM posts WHERE ((posts.discussion_id = ?) AND ((posts.discussion_id IS NOT NULL) AND ((is_private = ?) AND ((hidden_at IS NULL) AND ((type = ?) AND type IN (?, ?, ?, ?, ?))))))
? = 1
? = 0
? = comment
? = discussionLocked
? = discussionStickied
? = discussionTagged
? = comment
? = discussionRenamed
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  nosort
SELECT * FROM posts WHERE ((posts.discussion_id = ?) AND ((posts.discussion_id IS NOT NULL) AND ((is_private = ?) AND ((hidden_at IS NULL) AND ((type = ?) AND type IN (?, ?, ?, ?, ?)))))) ORDER BY created_at DESC LIMIT 1
? = 1
? = 0
? = comment
? = discussionLocked
? = discussionStickied
? = discussionTagged
? = comment
? = discussionRenamed
----
14 values hashing to d23d698ab5fe74f2dff1571646953260

query  rowsort
SELECT count(distinct users.id) AS aggregate FROM users INNER JOIN posts ON (posts.user_id = users.id) WHERE ((posts.discussion_id = ?) AND ((posts.is_private = ?) AND (posts.type = ?)))
? = 1
? = 0
? = comment
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
UPDATE discussions SET participant_count = ?, last_posted_at = ?, last_posted_user_id = ?, last_post_id = ?, last_post_number = ? WHERE (id = ?)
? = 1
? = 2021-10-13 15:06:56
? = 2
? = 1
? = 1
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT count(*) AS aggregate FROM posts WHERE ((posts.user_id = ?) AND ((posts.user_id IS NOT NULL) AND ((type = ?) AND ((is_private = ?) AND type IN (?, ?, ?, ?, ?)))))
? = 2
? = comment
? = 0
? = discussionLocked
? = discussionStickied
? = discussionTagged
? = comment
? = discussionRenamed
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
UPDATE users SET comment_count = ? WHERE (id = ?)
? = 1
? = 2
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
UPDATE tags SET last_posted_at = ?, last_posted_discussion_id = ?, last_posted_user_id = ? WHERE (id = ?)
? = 2021-10-13 15:06:56
? = 1
? = 2
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT count(*) AS aggregate FROM discussions WHERE ((discussions.user_id = ?) AND ((discussions.user_id IS NOT NULL) AND (is_private = ?)))
? = 2
? = 0
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
UPDATE users SET discussion_count = ? WHERE (id = ?)
? = 1
? = 2
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT tags.*, discussion_tag.discussion_id AS pivot_discussion_id, discussion_tag.tag_id AS pivot_tag_id FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussion_tag.discussion_id = ?)
? = 1
----
19 values hashing to fc4bfabaf4112b5a553847ed83ae574d

query  rowsort
UPDATE tags SET discussion_count = ? WHERE (id = ?)
? = 1
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
UPDATE discussions SET first_post_id = ? WHERE (id = ?)
? = 1
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM discussions WHERE ((id = ?) AND (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))))) AND (((discussions.is_private = ?) OR ((discussions.is_approved = ?) AND ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))) AND (((discussions.hidden_at IS NULL) OR ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id))))) AND ((discussions.comment_count > ?) OR ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id))))))))) LIMIT 1
? = 1
? = 1
? = 0
? = 1
? = 0
? = 0
? = 0
? = 2
? = 1
? = 1
? = 2
? = 1
? = 1
? = 0
? = 2
? = 1
? = 1
----
19 values hashing to dbf9240a9758b2ac3b871dde6bdff885

query  rowsort
SELECT * FROM discussion_user WHERE ((discussion_user.discussion_id = ?) AND ((discussion_user.discussion_id IS NOT NULL) AND (user_id = ?))) LIMIT 1
? = 1
? = 2
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
INSERT INTO discussion_user (discussion_id, user_id, last_read_post_number, last_read_at) VALUES (?, ?, ?, ?)
? = 1
? = 2
? = 1
? = 2021-10-13 15:06:56
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM discussion_user WHERE ((discussion_user.discussion_id = ?) AND ((discussion_user.discussion_id IS NOT NULL) AND (user_id = ?))) LIMIT 1
? = 1
? = 2
----
5 values hashing to fd34c95552e0df48f5cb4f5cf3d85ab4

query  rowsort
SELECT * FROM posts WHERE ((posts.discussion_id = ?) AND ((posts.discussion_id IS NOT NULL) AND type IN (?, ?, ?, ?, ?)))
? = 1
? = discussionLocked
? = discussionStickied
? = discussionTagged
? = comment
? = discussionRenamed
----
14 values hashing to d23d698ab5fe74f2dff1571646953260

query  rowsort
SELECT * FROM users WHERE (users.id = ?) LIMIT 1
? = 2
----
15 values hashing to ccde836101829c44aacb785e9e7c52dd

query  rowsort
SELECT * FROM posts WHERE ((posts.id = ?) AND type IN (?, ?, ?, ?, ?)) LIMIT 1
? = 1
? = discussionLocked
? = discussionStickied
? = discussionTagged
? = comment
? = discussionRenamed
----
14 values hashing to d23d698ab5fe74f2dff1571646953260

query  rowsort
SELECT * FROM posts WHERE ((posts.id = ?) AND type IN (?, ?, ?, ?, ?)) LIMIT 1
? = 1
? = discussionLocked
? = discussionStickied
? = discussionTagged
? = comment
? = discussionRenamed
----
14 values hashing to d23d698ab5fe74f2dff1571646953260

query  rowsort
SELECT * FROM discussions WHERE (discussions.id = ?) LIMIT 1
? = 1
----
19 values hashing to dbf9240a9758b2ac3b871dde6bdff885

query  rowsort
SELECT tags.*, discussion_tag.discussion_id AS pivot_discussion_id, discussion_tag.tag_id AS pivot_tag_id FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussion_tag.discussion_id = ?)
? = 1
----
19 values hashing to fed5d9e87fffaefec8fed26d7ca727a3

statement ok
use `test`


statement ok
SET @@SESSION.sql_mode = 'NO_ENGINE_SUBSTITUTION'


query  rowsort
SELECT value, `key` FROM settings
----
48 values hashing to e11d463eff76c9eead8ddf378d651ea0

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:57
? = session
? = 2021-10-13 14:06:57
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to 3c1f6df227c0e257912b6ebb1067c924

query  rowsort
UPDATE access_tokens SET last_activity_at = ?, last_ip_address = ?, last_user_agent = ? WHERE (id = ?)
? = 2021-10-13 15:06:57
? = NULL
? = NULL
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:57
? = session
? = 2021-10-13 14:06:57
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to 30067ab5e24bee8ea5ea847cb174f0c2

query  rowsort
SELECT * FROM users WHERE (users.id = ?) LIMIT 1
? = 2
----
15 values hashing to ccde836101829c44aacb785e9e7c52dd

query  rowsort
UPDATE users SET last_seen_at = ? WHERE (id = ?)
? = 2021-10-13 15:06:57
? = 2
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
UPDATE access_tokens SET last_ip_address = ?, last_user_agent = ? WHERE (id = ?)
? = 127.0.0.1
? = curl/7.74.0
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT `groups`.*, group_user.user_id AS pivot_user_id, group_user.group_id AS pivot_group_id FROM `groups` INNER JOIN group_user ON (`groups`.id = group_user.group_id) WHERE (group_user.user_id = ?)
? = 2
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT permission FROM group_permission WHERE group_id IN (?, ?)
? = 2
? = 3
----
8 values hashing to da3692841b36aa0ee123477b5cd2182d

query  rowsort
SELECT count(*) AS aggregate FROM tags WHERE ((tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))) AND (tags.position IS NOT NULL))
? = 1
? = 0
? = 1
? = 0
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
SELECT count(*) AS aggregate FROM tags WHERE ((tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))) AND (tags.position IS NULL))
? = 1
? = 0
? = 1
? = 0
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
SELECT id FROM tags WHERE (is_hidden = ?)
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM users WHERE users.id IN (2)
----
15 values hashing to 0874b504e4f0b54e33d6454f94f3d0b7

query  rowsort
SELECT * FROM users WHERE users.id IN (2)
----
15 values hashing to 0874b504e4f0b54e33d6454f94f3d0b7

query  rowsort
SELECT * FROM posts WHERE (posts.id IN (1) AND type IN (?, ?, ?, ?, ?))
? = discussionLocked
? = discussionStickied
? = discussionTagged
? = comment
? = discussionRenamed
----
14 values hashing to d23d698ab5fe74f2dff1571646953260

query  rowsort
SELECT tags.*, discussion_tag.discussion_id AS pivot_discussion_id, discussion_tag.tag_id AS pivot_tag_id FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE discussion_tag.discussion_id IN (1)
----
19 values hashing to fed5d9e87fffaefec8fed26d7ca727a3

query  rowsort
SELECT * FROM tags WHERE (0 = 1)
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM discussion_user WHERE ((user_id = ?) AND discussion_user.discussion_id IN (1))
? = 2
----
5 values hashing to fd34c95552e0df48f5cb4f5cf3d85ab4

statement ok
use `test`


statement ok
SET @@SESSION.sql_mode = 'NO_ENGINE_SUBSTITUTION'


query  rowsort
SELECT value, `key` FROM settings
----
48 values hashing to e11d463eff76c9eead8ddf378d651ea0

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:57
? = session
? = 2021-10-13 14:06:57
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to 75e7461955242acae9e73d1bf06ff093

query  rowsort
UPDATE access_tokens SET last_ip_address = ?, last_user_agent = ? WHERE (id = ?)
? = NULL
? = NULL
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:57
? = session
? = 2021-10-13 14:06:57
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to 30067ab5e24bee8ea5ea847cb174f0c2

query  rowsort
SELECT * FROM users WHERE (users.id = ?) LIMIT 1
? = 2
----
15 values hashing to 0874b504e4f0b54e33d6454f94f3d0b7

query  rowsort
UPDATE access_tokens SET last_ip_address = ?, last_user_agent = ? WHERE (id = ?)
? = 127.0.0.1
? = curl/7.74.0
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT `groups`.*, group_user.user_id AS pivot_user_id, group_user.group_id AS pivot_group_id FROM `groups` INNER JOIN group_user ON (`groups`.id = group_user.group_id) WHERE (group_user.user_id = ?)
? = 2
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT permission FROM group_permission WHERE group_id IN (?, ?)
? = 2
? = 3
----
8 values hashing to da3692841b36aa0ee123477b5cd2182d

query  rowsort
SELECT count(*) AS aggregate FROM tags WHERE ((tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))) AND (tags.position IS NOT NULL))
? = 1
? = 0
? = 1
? = 0
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
SELECT count(*) AS aggregate FROM tags WHERE ((tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))) AND (tags.position IS NULL))
? = 1
? = 0
? = 1
? = 0
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
SELECT * FROM discussions WHERE ((id = ?) AND (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))))) AND (((discussions.is_private = ?) OR ((discussions.is_approved = ?) AND ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))) AND (((discussions.hidden_at IS NULL) OR ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id))))) AND ((discussions.comment_count > ?) OR ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id))))))))) LIMIT 1
? = 1
? = 1
? = 0
? = 1
? = 0
? = 0
? = 0
? = 2
? = 1
? = 1
? = 2
? = 1
? = 1
? = 0
? = 2
? = 1
? = 1
----
19 values hashing to dbf9240a9758b2ac3b871dde6bdff885

query  nosort
SELECT id FROM posts WHERE ((posts.discussion_id = ?) AND ((posts.discussion_id IS NOT NULL) AND (EXISTS (SELECT 1 FROM discussions WHERE ((discussions.id = posts.discussion_id) AND (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))))) AND (((discussions.is_private = ?) OR ((discussions.is_approved = ?) AND ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))) AND (((discussions.hidden_at IS NULL) OR ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id))))) AND ((discussions.comment_count > ?) OR ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))))))) AND (((posts.is_private = ?) OR ((posts.is_approved = ?) AND ((posts.user_id = ?) OR EXISTS (SELECT 1 FROM discussions WHERE ((discussions.id = posts.discussion_id) AND (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))))) AND (((posts.hidden_at IS NULL) OR ((posts.user_id = ?) OR EXISTS (SELECT 1 FROM discussions WHERE ((discussions.id = posts.discussion_id) AND ((1 = 0) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))))) AND type IN (?, ?, ?, ?, ?)))))) ORDER BY created_at ASC
? = 1
? = 1
? = 0
? = 1
? = 0
? = 0
? = 0
? = 2
? = 1
? = 1
? = 2
? = 1
? = 1
? = 0
? = 2
? = 1
? = 1
? = 0
? = 0
? = 2
? = 1
? = 1
? = 2
? = 1
? = 1
? = discussionLocked
? = discussionStickied
? = discussionTagged
? = comment
? = discussionRenamed
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  nosort
SELECT * FROM posts WHERE ((posts.discussion_id = ?) AND ((posts.discussion_id IS NOT NULL) AND (EXISTS (SELECT 1 FROM discussions WHERE ((discussions.id = posts.discussion_id) AND (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))))) AND (((discussions.is_private = ?) OR ((discussions.is_approved = ?) AND ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))) AND (((discussions.hidden_at IS NULL) OR ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id))))) AND ((discussions.comment_count > ?) OR ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))))))) AND (((posts.is_private = ?) OR ((posts.is_approved = ?) AND ((posts.user_id = ?) OR EXISTS (SELECT 1 FROM discussions WHERE ((discussions.id = posts.discussion_id) AND (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))))) AND (((posts.hidden_at IS NULL) OR ((posts.user_id = ?) OR EXISTS (SELECT 1 FROM discussions WHERE ((discussions.id = posts.discussion_id) AND ((1 = 0) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))))) AND type IN (?, ?, ?, ?, ?)))))) ORDER BY created_at ASC LIMIT 20 OFFSET 0
? = 1
? = 1
? = 0
? = 1
? = 0
? = 0
? = 0
? = 2
? = 1
? = 1
? = 2
? = 1
? = 1
? = 0
? = 2
? = 1
? = 1
? = 0
? = 0
? = 2
? = 1
? = 1
? = 2
? = 1
? = 1
? = discussionLocked
? = discussionStickied
? = discussionTagged
? = comment
? = discussionRenamed
----
14 values hashing to d23d698ab5fe74f2dff1571646953260

query  rowsort
SELECT * FROM discussions WHERE discussions.id IN (1)
----
19 values hashing to dbf9240a9758b2ac3b871dde6bdff885

query  rowsort
SELECT * FROM users WHERE users.id IN (2)
----
15 values hashing to 0874b504e4f0b54e33d6454f94f3d0b7

query  rowsort
SELECT `groups`.*, group_user.user_id AS pivot_user_id, group_user.group_id AS pivot_group_id FROM `groups` INNER JOIN group_user ON (`groups`.id = group_user.group_id) WHERE group_user.user_id IN (2)
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM users WHERE (0 = 1)
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM users WHERE (0 = 1)
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM flags WHERE flags.post_id IN (1)
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT users.*, post_likes.post_id AS pivot_post_id, post_likes.user_id AS pivot_user_id FROM users INNER JOIN post_likes ON (users.id = post_likes.user_id) WHERE post_likes.post_id IN (1)
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT posts.*, post_mentions_post.mentions_post_id AS pivot_mentions_post_id, post_mentions_post.post_id AS pivot_post_id FROM posts INNER JOIN post_mentions_post ON (posts.id = post_mentions_post.post_id) WHERE (post_mentions_post.mentions_post_id IN (1) AND type IN (?, ?, ?, ?, ?))
? = discussionLocked
? = discussionStickied
? = discussionTagged
? = comment
? = discussionRenamed
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT tags.*, discussion_tag.discussion_id AS pivot_discussion_id, discussion_tag.tag_id AS pivot_tag_id FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE discussion_tag.discussion_id IN (1)
----
19 values hashing to fed5d9e87fffaefec8fed26d7ca727a3

query  rowsort
SELECT * FROM tag_user WHERE tag_user.tag_id IN (1)
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM tags WHERE (0 = 1)
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT users.*, post_mentions_user.post_id AS pivot_post_id, post_mentions_user.mentions_user_id AS pivot_mentions_user_id FROM users INNER JOIN post_mentions_user ON (users.id = post_mentions_user.mentions_user_id) WHERE post_mentions_user.post_id IN (1)
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT posts.*, post_mentions_post.post_id AS pivot_post_id, post_mentions_post.mentions_post_id AS pivot_mentions_post_id FROM posts INNER JOIN post_mentions_post ON (posts.id = post_mentions_post.mentions_post_id) WHERE (post_mentions_post.post_id IN (1) AND type IN (?, ?, ?, ?, ?))
? = discussionLocked
? = discussionStickied
? = discussionTagged
? = comment
? = discussionRenamed
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT posts.id FROM posts WHERE (EXISTS (SELECT 1 FROM discussions WHERE ((discussions.id = posts.discussion_id) AND (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))))) AND (((discussions.is_private = ?) OR ((discussions.is_approved = ?) AND ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))) AND (((discussions.hidden_at IS NULL) OR ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id))))) AND ((discussions.comment_count > ?) OR ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))))))) AND (((posts.is_private = ?) OR ((posts.is_approved = ?) AND ((posts.user_id = ?) OR EXISTS (SELECT 1 FROM discussions WHERE ((discussions.id = posts.discussion_id) AND (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))))) AND (((posts.hidden_at IS NULL) OR ((posts.user_id = ?) OR EXISTS (SELECT 1 FROM discussions WHERE ((discussions.id = posts.discussion_id) AND ((1 = 0) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))))) AND ((0 = 1) AND type IN (?, ?, ?, ?, ?)))))
? = 1
? = 0
? = 1
? = 0
? = 0
? = 0
? = 2
? = 1
? = 1
? = 2
? = 1
? = 1
? = 0
? = 2
? = 1
? = 1
? = 0
? = 0
? = 2
? = 1
? = 1
? = 2
? = 1
? = 1
? = discussionLocked
? = discussionStickied
? = discussionTagged
? = comment
? = discussionRenamed
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM discussion_user WHERE ((discussion_user.discussion_id = ?) AND ((discussion_user.discussion_id IS NOT NULL) AND (user_id = ?))) LIMIT 1
? = 1
? = 2
----
5 values hashing to fd34c95552e0df48f5cb4f5cf3d85ab4

query  rowsort
SELECT `groups`.*, group_user.user_id AS pivot_user_id, group_user.group_id AS pivot_group_id FROM `groups` INNER JOIN group_user ON (`groups`.id = group_user.group_id) WHERE ((group_user.user_id = ?) AND (is_hidden = ?))
? = 2
? = 0
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
use `test`


statement ok
SET @@SESSION.sql_mode = 'NO_ENGINE_SUBSTITUTION'


query  rowsort
SELECT value, `key` FROM settings
----
48 values hashing to e11d463eff76c9eead8ddf378d651ea0

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:57
? = session
? = 2021-10-13 14:06:57
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to 75e7461955242acae9e73d1bf06ff093

query  rowsort
UPDATE access_tokens SET last_ip_address = ?, last_user_agent = ? WHERE (id = ?)
? = NULL
? = NULL
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:57
? = session
? = 2021-10-13 14:06:57
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to 30067ab5e24bee8ea5ea847cb174f0c2

query  rowsort
SELECT * FROM users WHERE (users.id = ?) LIMIT 1
? = 2
----
15 values hashing to 0874b504e4f0b54e33d6454f94f3d0b7

query  rowsort
UPDATE access_tokens SET last_ip_address = ?, last_user_agent = ? WHERE (id = ?)
? = 127.0.0.1
? = curl/7.74.0
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT `groups`.*, group_user.user_id AS pivot_user_id, group_user.group_id AS pivot_group_id FROM `groups` INNER JOIN group_user ON (`groups`.id = group_user.group_id) WHERE (group_user.user_id = ?)
? = 2
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT permission FROM group_permission WHERE group_id IN (?, ?)
? = 2
? = 3
----
8 values hashing to da3692841b36aa0ee123477b5cd2182d

query  rowsort
SELECT * FROM tags WHERE (id IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL)))) AND (slug = ?)) LIMIT 1
? = 1
? = 0
? = 1
? = 0
? = general
----
17 values hashing to 0c5398a183a820fba2efe95ba62c6c12

query  rowsort
SELECT * FROM tags WHERE tags.parent_id IN (1)
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM tags WHERE (0 = 1)
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM tag_user WHERE tag_user.tag_id IN (1)
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
use `test`


statement ok
SET @@SESSION.sql_mode = 'NO_ENGINE_SUBSTITUTION'


query  rowsort
SELECT value, `key` FROM settings
----
48 values hashing to e11d463eff76c9eead8ddf378d651ea0

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:57
? = session
? = 2021-10-13 14:06:57
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to 75e7461955242acae9e73d1bf06ff093

query  rowsort
UPDATE access_tokens SET last_ip_address = ?, last_user_agent = ? WHERE (id = ?)
? = NULL
? = NULL
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:57
? = session
? = 2021-10-13 14:06:57
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to 30067ab5e24bee8ea5ea847cb174f0c2

query  rowsort
SELECT * FROM users WHERE (users.id = ?) LIMIT 1
? = 2
----
15 values hashing to 0874b504e4f0b54e33d6454f94f3d0b7

query  rowsort
UPDATE access_tokens SET last_ip_address = ?, last_user_agent = ? WHERE (id = ?)
? = 127.0.0.1
? = curl/7.74.0
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT `groups`.*, group_user.user_id AS pivot_user_id, group_user.group_id AS pivot_group_id FROM `groups` INNER JOIN group_user ON (`groups`.id = group_user.group_id) WHERE (group_user.user_id = ?)
? = 2
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT permission FROM group_permission WHERE group_id IN (?, ?)
? = 2
? = 3
----
8 values hashing to da3692841b36aa0ee123477b5cd2182d

query  rowsort
SELECT count(*) AS aggregate FROM tags WHERE ((tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))) AND (tags.position IS NOT NULL))
? = 1
? = 0
? = 1
? = 0
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
SELECT count(*) AS aggregate FROM tags WHERE ((tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))) AND (tags.position IS NULL))
? = 1
? = 0
? = 1
? = 0
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  nosort
SELECT discussions.* FROM discussions WHERE (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))))) AND (((discussions.is_private = ?) OR ((discussions.is_approved = ?) AND ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))) AND (((discussions.hidden_at IS NULL) OR ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id))))) AND (((discussions.comment_count > ?) OR ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id))))) AND id IN (SELECT discussion_id FROM discussion_user WHERE ((user_id = ?) AND (subscription = ?))))))) ORDER BY last_posted_at DESC LIMIT 21
? = 1
? = 0
? = 1
? = 0
? = 0
? = 0
? = 2
? = 1
? = 1
? = 2
? = 1
? = 1
? = 0
? = 2
? = 1
? = 1
? = 2
? = follow
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
use `test`


statement ok
SET @@SESSION.sql_mode = 'NO_ENGINE_SUBSTITUTION'


query  rowsort
SELECT value, `key` FROM settings
----
48 values hashing to e11d463eff76c9eead8ddf378d651ea0

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:57
? = session
? = 2021-10-13 14:06:57
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to 75e7461955242acae9e73d1bf06ff093

query  rowsort
UPDATE access_tokens SET last_ip_address = ?, last_user_agent = ? WHERE (id = ?)
? = NULL
? = NULL
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:57
? = session
? = 2021-10-13 14:06:57
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to 30067ab5e24bee8ea5ea847cb174f0c2

query  rowsort
SELECT * FROM users WHERE (users.id = ?) LIMIT 1
? = 2
----
15 values hashing to 0874b504e4f0b54e33d6454f94f3d0b7

query  rowsort
UPDATE access_tokens SET last_ip_address = ?, last_user_agent = ? WHERE (id = ?)
? = 127.0.0.1
? = curl/7.74.0
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT `groups`.*, group_user.user_id AS pivot_user_id, group_user.group_id AS pivot_group_id FROM `groups` INNER JOIN group_user ON (`groups`.id = group_user.group_id) WHERE (group_user.user_id = ?)
? = 2
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT permission FROM group_permission WHERE group_id IN (?, ?)
? = 2
? = 3
----
8 values hashing to da3692841b36aa0ee123477b5cd2182d

query  rowsort
SELECT * FROM tags WHERE id IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))))
? = 1
? = 0
? = 1
? = 0
----
17 values hashing to 0c5398a183a820fba2efe95ba62c6c12

query  rowsort
SELECT * FROM tag_user WHERE (tag_user.tag_id IN (1) AND (user_id = ?))
? = 2
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM tags WHERE tags.parent_id IN (1)
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM discussions WHERE discussions.id IN (1)
----
19 values hashing to dbf9240a9758b2ac3b871dde6bdff885

query  rowsort
SELECT tags.*, discussion_tag.discussion_id AS pivot_discussion_id, discussion_tag.tag_id AS pivot_tag_id FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE discussion_tag.discussion_id IN (1)
----
19 values hashing to fed5d9e87fffaefec8fed26d7ca727a3

query  rowsort
SELECT * FROM discussion_user WHERE ((user_id IS NULL) AND discussion_user.discussion_id IN (1))
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
use `test`


statement ok
SET @@SESSION.sql_mode = 'NO_ENGINE_SUBSTITUTION'


query  rowsort
SELECT value, `key` FROM settings
----
48 values hashing to e11d463eff76c9eead8ddf378d651ea0

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:57
? = session
? = 2021-10-13 14:06:57
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to 75e7461955242acae9e73d1bf06ff093

query  rowsort
UPDATE access_tokens SET last_ip_address = ?, last_user_agent = ? WHERE (id = ?)
? = NULL
? = NULL
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:57
? = session
? = 2021-10-13 14:06:57
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to 30067ab5e24bee8ea5ea847cb174f0c2

query  rowsort
SELECT * FROM users WHERE (users.id = ?) LIMIT 1
? = 2
----
15 values hashing to 0874b504e4f0b54e33d6454f94f3d0b7

query  rowsort
UPDATE access_tokens SET last_ip_address = ?, last_user_agent = ? WHERE (id = ?)
? = 127.0.0.1
? = curl/7.74.0
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
UPDATE users SET read_notifications_at = ? WHERE (id = ?)
? = 2021-10-13 15:06:57
? = 2
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT `groups`.*, group_user.user_id AS pivot_user_id, group_user.group_id AS pivot_group_id FROM `groups` INNER JOIN group_user ON (`groups`.id = group_user.group_id) WHERE (group_user.user_id = ?)
? = 2
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT permission FROM group_permission WHERE group_id IN (?, ?)
? = 2
? = 3
----
8 values hashing to da3692841b36aa0ee123477b5cd2182d

query  rowsort
SELECT count(*) AS aggregate FROM tags WHERE ((tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))) AND (tags.position IS NOT NULL))
? = 1
? = 0
? = 1
? = 0
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
SELECT count(*) AS aggregate FROM tags WHERE ((tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))) AND (tags.position IS NULL))
? = 1
? = 0
? = 1
? = 0
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  nosort
SELECT notifications.*, p.unread_count FROM notifications INNER JOIN (SELECT max(id) AS id, sum((read_at IS NULL)) AS unread_count FROM notifications WHERE ((user_id = ?) AND (type IN (?, ?, ?, ?, ?, ?, ?, ?) AND ((is_deleted = ?) AND ((type IN (?, ?, ?) AND EXISTS (SELECT 1 FROM discussions WHERE ((id = subject_id) AND (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))))) AND (((discussions.is_private = ?) OR ((discussions.is_approved = ?) AND ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))) AND (((discussions.hidden_at IS NULL) OR ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id))))) AND ((discussions.comment_count > ?) OR ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id))))))))))) OR ((type IN (?, ?, ?) AND EXISTS (SELECT 1 FROM posts WHERE ((id = subject_id) AND (EXISTS (SELECT 1 FROM discussions WHERE ((discussions.id = posts.discussion_id) AND (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))))) AND (((discussions.is_private = ?) OR ((discussions.is_approved = ?) AND ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))) AND (((discussions.hidden_at IS NULL) OR ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id))))) AND ((discussions.comment_count > ?) OR ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))))))) AND (((posts.is_private = ?) OR ((posts.is_approved = ?) AND ((posts.user_id = ?) OR EXISTS (SELECT 1 FROM discussions WHERE ((discussions.id = posts.discussion_id) AND (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))))) AND ((posts.hidden_at IS NULL) OR ((posts.user_id = ?) OR EXISTS (SELECT 1 FROM discussions WHERE ((discussions.id = posts.discussion_id) AND ((1 = 0) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id))))))))))))) OR (type IN (?, ?) AND EXISTS (SELECT 1 FROM users WHERE (id = subject_id)))))))) GROUP BY type, subject_id ORDER BY max(created_at) DESC LIMIT 11 OFFSET 0) AS p ON (notifications.id = p.id) ORDER BY created_at DESC
? = 2
? = discussionRenamed
? = postLiked
? = discussionLocked
? = postMentioned
? = userMentioned
? = newPost
? = userSuspended
? = userUnsuspended
? = 0
? = discussionRenamed
? = discussionLocked
? = newPost
? = 1
? = 0
? = 1
? = 0
? = 0
? = 0
? = 2
? = 1
? = 1
? = 2
? = 1
? = 1
? = 0
? = 2
? = 1
? = 1
? = postLiked
? = postMentioned
? = userMentioned
? = 1
? = 0
? = 1
? = 0
? = 0
? = 0
? = 2
? = 1
? = 1
? = 2
? = 1
? = 1
? = 0
? = 2
? = 1
? = 1
? = 0
? = 0
? = 2
? = 1
? = 1
? = 2
? = 1
? = 1
? = userSuspended
? = userUnsuspended
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
use `test`


statement ok
SET @@SESSION.sql_mode = 'NO_ENGINE_SUBSTITUTION'


query  rowsort
SELECT value, `key` FROM settings
----
48 values hashing to e11d463eff76c9eead8ddf378d651ea0

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:58
? = session
? = 2021-10-13 14:06:58
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to 75e7461955242acae9e73d1bf06ff093

query  rowsort
UPDATE access_tokens SET last_activity_at = ?, last_ip_address = ?, last_user_agent = ? WHERE (id = ?)
? = 2021-10-13 15:06:58
? = NULL
? = NULL
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:58
? = session
? = 2021-10-13 14:06:58
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to 070762af0b138be2ff398be6c9c8e142

query  rowsort
SELECT * FROM users WHERE (users.id = ?) LIMIT 1
? = 2
----
15 values hashing to 274f28285da02d7357ff96a78e48634d

query  rowsort
UPDATE users SET last_seen_at = ? WHERE (id = ?)
? = 2021-10-13 15:06:58
? = 2
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
UPDATE access_tokens SET last_ip_address = ?, last_user_agent = ? WHERE (id = ?)
? = 127.0.0.1
? = curl/7.74.0
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT `groups`.*, group_user.user_id AS pivot_user_id, group_user.group_id AS pivot_group_id FROM `groups` INNER JOIN group_user ON (`groups`.id = group_user.group_id) WHERE (group_user.user_id = ?)
? = 2
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT permission FROM group_permission WHERE group_id IN (?, ?)
? = 2
? = 3
----
8 values hashing to da3692841b36aa0ee123477b5cd2182d

query  rowsort
SELECT count(*) AS aggregate FROM tags WHERE ((tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))) AND (tags.position IS NOT NULL))
? = 1
? = 0
? = 1
? = 0
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
SELECT count(*) AS aggregate FROM tags WHERE ((tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))) AND (tags.position IS NULL))
? = 1
? = 0
? = 1
? = 0
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
SELECT id FROM users WHERE username IN (?)
? = test
----
1 values hashing to 26ab0db90d72e28ad0ba1e22ee510510

query  nosort
SELECT * FROM posts WHERE (EXISTS (SELECT 1 FROM discussions WHERE ((discussions.id = posts.discussion_id) AND (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))))) AND (((discussions.is_private = ?) OR ((discussions.is_approved = ?) AND ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))) AND (((discussions.hidden_at IS NULL) OR ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id))))) AND ((discussions.comment_count > ?) OR ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))))))) AND (((posts.is_private = ?) OR ((posts.is_approved = ?) AND ((posts.user_id = ?) OR EXISTS (SELECT 1 FROM discussions WHERE ((discussions.id = posts.discussion_id) AND (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))))) AND (((posts.hidden_at IS NULL) OR ((posts.user_id = ?) OR EXISTS (SELECT 1 FROM discussions WHERE ((discussions.id = posts.discussion_id) AND ((1 = 0) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))))) AND (posts.user_id IN (?) AND ((posts.type = ?) AND type IN (?, ?, ?, ?, ?)))))) ORDER BY created_at DESC LIMIT 21
? = 1
? = 0
? = 1
? = 0
? = 0
? = 0
? = 2
? = 1
? = 1
? = 2
? = 1
? = 1
? = 0
? = 2
? = 1
? = 1
? = 0
? = 0
? = 2
? = 1
? = 1
? = 2
? = 1
? = 1
? = 2
? = comment
? = discussionLocked
? = discussionStickied
? = discussionTagged
? = comment
? = discussionRenamed
----
14 values hashing to d23d698ab5fe74f2dff1571646953260

query  rowsort
SELECT * FROM users WHERE users.id IN (2)
----
15 values hashing to eb3abd416b395cf9c4d6822248299d71

query  rowsort
SELECT `groups`.*, group_user.user_id AS pivot_user_id, group_user.group_id AS pivot_group_id FROM `groups` INNER JOIN group_user ON (`groups`.id = group_user.group_id) WHERE group_user.user_id IN (2)
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM users WHERE (0 = 1)
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM users WHERE (0 = 1)
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM discussions WHERE discussions.id IN (1)
----
19 values hashing to dbf9240a9758b2ac3b871dde6bdff885

query  rowsort
SELECT * FROM flags WHERE flags.post_id IN (1)
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT users.*, post_likes.post_id AS pivot_post_id, post_likes.user_id AS pivot_user_id FROM users INNER JOIN post_likes ON (users.id = post_likes.user_id) WHERE post_likes.post_id IN (1)
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT posts.*, post_mentions_post.mentions_post_id AS pivot_mentions_post_id, post_mentions_post.post_id AS pivot_post_id FROM posts INNER JOIN post_mentions_post ON (posts.id = post_mentions_post.post_id) WHERE (post_mentions_post.mentions_post_id IN (1) AND type IN (?, ?, ?, ?, ?))
? = discussionLocked
? = discussionStickied
? = discussionTagged
? = comment
? = discussionRenamed
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT tags.*, discussion_tag.discussion_id AS pivot_discussion_id, discussion_tag.tag_id AS pivot_tag_id FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE discussion_tag.discussion_id IN (1)
----
19 values hashing to fed5d9e87fffaefec8fed26d7ca727a3

query  rowsort
SELECT users.*, post_mentions_user.post_id AS pivot_post_id, post_mentions_user.mentions_user_id AS pivot_mentions_user_id FROM users INNER JOIN post_mentions_user ON (users.id = post_mentions_user.mentions_user_id) WHERE post_mentions_user.post_id IN (1)
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT posts.*, post_mentions_post.post_id AS pivot_post_id, post_mentions_post.mentions_post_id AS pivot_mentions_post_id FROM posts INNER JOIN post_mentions_post ON (posts.id = post_mentions_post.mentions_post_id) WHERE (post_mentions_post.post_id IN (1) AND type IN (?, ?, ?, ?, ?))
? = discussionLocked
? = discussionStickied
? = discussionTagged
? = comment
? = discussionRenamed
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT posts.id FROM posts WHERE (EXISTS (SELECT 1 FROM discussions WHERE ((discussions.id = posts.discussion_id) AND (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))))) AND (((discussions.is_private = ?) OR ((discussions.is_approved = ?) AND ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))) AND (((discussions.hidden_at IS NULL) OR ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id))))) AND ((discussions.comment_count > ?) OR ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))))))) AND (((posts.is_private = ?) OR ((posts.is_approved = ?) AND ((posts.user_id = ?) OR EXISTS (SELECT 1 FROM discussions WHERE ((discussions.id = posts.discussion_id) AND (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))))) AND (((posts.hidden_at IS NULL) OR ((posts.user_id = ?) OR EXISTS (SELECT 1 FROM discussions WHERE ((discussions.id = posts.discussion_id) AND ((1 = 0) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))))) AND ((0 = 1) AND type IN (?, ?, ?, ?, ?)))))
? = 1
? = 0
? = 1
? = 0
? = 0
? = 0
? = 2
? = 1
? = 1
? = 2
? = 1
? = 1
? = 0
? = 2
? = 1
? = 1
? = 0
? = 0
? = 2
? = 1
? = 1
? = 2
? = 1
? = 1
? = discussionLocked
? = discussionStickied
? = discussionTagged
? = comment
? = discussionRenamed
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT `groups`.*, group_user.user_id AS pivot_user_id, group_user.group_id AS pivot_group_id FROM `groups` INNER JOIN group_user ON (`groups`.id = group_user.group_id) WHERE ((group_user.user_id = ?) AND (is_hidden = ?))
? = 2
? = 0
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
use `test`


statement ok
SET @@SESSION.sql_mode = 'NO_ENGINE_SUBSTITUTION'


query  rowsort
SELECT value, `key` FROM settings
----
48 values hashing to e11d463eff76c9eead8ddf378d651ea0

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:58
? = session
? = 2021-10-13 14:06:58
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to 95838f9abf96ea6cf917dc08b279344d

query  rowsort
UPDATE access_tokens SET last_ip_address = ?, last_user_agent = ? WHERE (id = ?)
? = NULL
? = NULL
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:58
? = session
? = 2021-10-13 14:06:58
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to 070762af0b138be2ff398be6c9c8e142

query  rowsort
SELECT * FROM users WHERE (users.id = ?) LIMIT 1
? = 2
----
15 values hashing to eb3abd416b395cf9c4d6822248299d71

query  rowsort
UPDATE access_tokens SET last_ip_address = ?, last_user_agent = ? WHERE (id = ?)
? = 127.0.0.1
? = curl/7.74.0
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT `groups`.*, group_user.user_id AS pivot_user_id, group_user.group_id AS pivot_group_id FROM `groups` INNER JOIN group_user ON (`groups`.id = group_user.group_id) WHERE (group_user.user_id = ?)
? = 2
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT permission FROM group_permission WHERE group_id IN (?, ?)
? = 2
? = 3
----
8 values hashing to da3692841b36aa0ee123477b5cd2182d

query  rowsort
SELECT count(*) AS aggregate FROM tags WHERE ((tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))) AND (tags.position IS NOT NULL))
? = 1
? = 0
? = 1
? = 0
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
SELECT count(*) AS aggregate FROM tags WHERE ((tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))) AND (tags.position IS NULL))
? = 1
? = 0
? = 1
? = 0
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  rowsort
SELECT id FROM users WHERE (username = ?) LIMIT 1
? = test
----
1 values hashing to 26ab0db90d72e28ad0ba1e22ee510510

query  nosort
SELECT discussions.* FROM discussions WHERE (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))))) AND (((discussions.is_private = ?) OR ((discussions.is_approved = ?) AND ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))) AND (((discussions.hidden_at IS NULL) OR ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id))))) AND (((discussions.comment_count > ?) OR ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id))))) AND discussions.user_id IN (?))))) ORDER BY created_at DESC LIMIT 21
? = 1
? = 0
? = 1
? = 0
? = 0
? = 0
? = 2
? = 1
? = 1
? = 2
? = 1
? = 1
? = 0
? = 2
? = 1
? = 1
? = 2
----
19 values hashing to dbf9240a9758b2ac3b871dde6bdff885

query  rowsort
SELECT * FROM users WHERE users.id IN (2)
----
15 values hashing to eb3abd416b395cf9c4d6822248299d71

query  rowsort
SELECT * FROM users WHERE users.id IN (2)
----
15 values hashing to eb3abd416b395cf9c4d6822248299d71

query  rowsort
SELECT * FROM posts WHERE ((0 = 1) AND type IN (?, ?, ?, ?, ?))
? = discussionLocked
? = discussionStickied
? = discussionTagged
? = comment
? = discussionRenamed
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT tags.*, discussion_tag.discussion_id AS pivot_discussion_id, discussion_tag.tag_id AS pivot_tag_id FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE discussion_tag.discussion_id IN (1)
----
19 values hashing to fed5d9e87fffaefec8fed26d7ca727a3

query  rowsort
SELECT * FROM tags WHERE (0 = 1)
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM discussion_user WHERE ((user_id = ?) AND discussion_user.discussion_id IN (1))
? = 2
----
5 values hashing to fd34c95552e0df48f5cb4f5cf3d85ab4

statement ok
use `test`


statement ok
SET @@SESSION.sql_mode = 'NO_ENGINE_SUBSTITUTION'


query  rowsort
SELECT value, `key` FROM settings
----
48 values hashing to e11d463eff76c9eead8ddf378d651ea0

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:58
? = session
? = 2021-10-13 14:06:58
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to 95838f9abf96ea6cf917dc08b279344d

query  rowsort
UPDATE access_tokens SET last_ip_address = ?, last_user_agent = ? WHERE (id = ?)
? = NULL
? = NULL
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:58
? = session
? = 2021-10-13 14:06:58
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to 070762af0b138be2ff398be6c9c8e142

query  rowsort
SELECT * FROM users WHERE (users.id = ?) LIMIT 1
? = 2
----
15 values hashing to eb3abd416b395cf9c4d6822248299d71

query  rowsort
UPDATE access_tokens SET last_ip_address = ?, last_user_agent = ? WHERE (id = ?)
? = 127.0.0.1
? = curl/7.74.0
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT `groups`.*, group_user.user_id AS pivot_user_id, group_user.group_id AS pivot_group_id FROM `groups` INNER JOIN group_user ON (`groups`.id = group_user.group_id) WHERE (group_user.user_id = ?)
? = 2
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT permission FROM group_permission WHERE group_id IN (?, ?)
? = 2
? = 3
----
8 values hashing to da3692841b36aa0ee123477b5cd2182d

query  rowsort
SELECT count(*) AS aggregate FROM tags WHERE ((tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))) AND (tags.position IS NOT NULL))
? = 1
? = 0
? = 1
? = 0
----
1 values hashing to b026324c6904b2a9cb4b88d6d61c81d1

query  rowsort
SELECT count(*) AS aggregate FROM tags WHERE ((tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))) AND (tags.position IS NULL))
? = 1
? = 0
? = 1
? = 0
----
1 values hashing to 897316929176464ebc9ad085f31e7284

query  nosort
SELECT * FROM posts INNER JOIN post_mentions_user ON (posts.id = post_mentions_user.post_id) WHERE (EXISTS (SELECT 1 FROM discussions WHERE ((discussions.id = posts.discussion_id) AND (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))))) AND (((discussions.is_private = ?) OR ((discussions.is_approved = ?) AND ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))) AND (((discussions.hidden_at IS NULL) OR ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id))))) AND ((discussions.comment_count > ?) OR ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))))))) AND (((posts.is_private = ?) OR ((posts.is_approved = ?) AND ((posts.user_id = ?) OR EXISTS (SELECT 1 FROM discussions WHERE ((discussions.id = posts.discussion_id) AND (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))))) AND (((posts.hidden_at IS NULL) OR ((posts.user_id = ?) OR EXISTS (SELECT 1 FROM discussions WHERE ((discussions.id = posts.discussion_id) AND ((1 = 0) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))))) AND ((posts.type = ?) AND ((post_mentions_user.mentions_user_id = ?) AND type IN (?, ?, ?, ?, ?)))))) ORDER BY created_at DESC LIMIT 21
? = 1
? = 0
? = 1
? = 0
? = 0
? = 0
? = 2
? = 1
? = 1
? = 2
? = 1
? = 1
? = 0
? = 2
? = 1
? = 1
? = 0
? = 0
? = 2
? = 1
? = 1
? = 2
? = 1
? = 1
? = comment
? = 2
? = discussionLocked
? = discussionStickied
? = discussionTagged
? = comment
? = discussionRenamed
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT posts.id FROM posts WHERE (EXISTS (SELECT 1 FROM discussions WHERE ((discussions.id = posts.discussion_id) AND (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE (((perm_tags.is_restricted = ?) AND (0 = 1)) OR (perm_tags.is_restricted = ?))) OR (tags.parent_id IS NULL))))) AND (((discussions.is_private = ?) OR ((discussions.is_approved = ?) AND ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))) AND (((discussions.hidden_at IS NULL) OR ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id))))) AND ((discussions.comment_count > ?) OR ((discussions.user_id = ?) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))))))) AND (((posts.is_private = ?) OR ((posts.is_approved = ?) AND ((posts.user_id = ?) OR EXISTS (SELECT 1 FROM discussions WHERE ((discussions.id = posts.discussion_id) AND (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))))) AND (((posts.hidden_at IS NULL) OR ((posts.user_id = ?) OR EXISTS (SELECT 1 FROM discussions WHERE ((discussions.id = posts.discussion_id) AND ((1 = 0) OR (discussions.id NOT IN (SELECT discussion_id FROM discussion_tag WHERE tag_id NOT IN (SELECT tags.id FROM tags WHERE (tags.id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) AND (tags.parent_id IN (SELECT perm_tags.id FROM tags AS perm_tags WHERE ((perm_tags.is_restricted = ?) AND (0 = 1))) OR (tags.parent_id IS NULL))))) AND EXISTS (SELECT * FROM tags INNER JOIN discussion_tag ON (tags.id = discussion_tag.tag_id) WHERE (discussions.id = discussion_tag.discussion_id)))))))) AND ((0 = 1) AND type IN (?, ?, ?, ?, ?)))))
? = 1
? = 0
? = 1
? = 0
? = 0
? = 0
? = 2
? = 1
? = 1
? = 2
? = 1
? = 1
? = 0
? = 2
? = 1
? = 1
? = 0
? = 0
? = 2
? = 1
? = 1
? = 2
? = 1
? = 1
? = discussionLocked
? = discussionStickied
? = discussionTagged
? = comment
? = discussionRenamed
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
use `test`


statement ok
SET @@SESSION.sql_mode = 'NO_ENGINE_SUBSTITUTION'


query  rowsort
SELECT value, `key` FROM settings
----
48 values hashing to e11d463eff76c9eead8ddf378d651ea0

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:58
? = session
? = 2021-10-13 14:06:58
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to 95838f9abf96ea6cf917dc08b279344d

query  rowsort
UPDATE access_tokens SET last_ip_address = ?, last_user_agent = ? WHERE (id = ?)
? = NULL
? = NULL
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:58
? = session
? = 2021-10-13 14:06:58
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to 070762af0b138be2ff398be6c9c8e142

query  rowsort
SELECT * FROM users WHERE (users.id = ?) LIMIT 1
? = 2
----
15 values hashing to eb3abd416b395cf9c4d6822248299d71

query  rowsort
UPDATE access_tokens SET last_ip_address = ?, last_user_agent = ? WHERE (id = ?)
? = 127.0.0.1
? = curl/7.74.0
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
use `test`


statement ok
SET @@SESSION.sql_mode = 'NO_ENGINE_SUBSTITUTION'


query  rowsort
SELECT value, `key` FROM settings
----
48 values hashing to e11d463eff76c9eead8ddf378d651ea0

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:58
? = session
? = 2021-10-13 14:06:58
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to 95838f9abf96ea6cf917dc08b279344d

query  rowsort
UPDATE access_tokens SET last_ip_address = ?, last_user_agent = ? WHERE (id = ?)
? = NULL
? = NULL
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:58
? = session
? = 2021-10-13 14:06:58
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to 070762af0b138be2ff398be6c9c8e142

query  rowsort
SELECT * FROM users WHERE (users.id = ?) LIMIT 1
? = 2
----
15 values hashing to eb3abd416b395cf9c4d6822248299d71

query  rowsort
UPDATE access_tokens SET last_ip_address = ?, last_user_agent = ? WHERE (id = ?)
? = 127.0.0.1
? = curl/7.74.0
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

statement ok
use `test`


statement ok
SET @@SESSION.sql_mode = 'NO_ENGINE_SUBSTITUTION'


query  rowsort
SELECT value, `key` FROM settings
----
48 values hashing to e11d463eff76c9eead8ddf378d651ea0

query  rowsort
DELETE FROM access_tokens WHERE (((type = ?) AND FALSE) OR (((type = ?) AND (last_activity_at < ?)) OR ((type = ?) AND (last_activity_at < ?))))
? = developer
? = session_remember
? = 2016-10-14 15:06:58
? = session
? = 2021-10-13 14:06:58
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
DELETE FROM email_tokens WHERE (created_at <= ?)
? = 2021-10-12 15:06:58
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
DELETE FROM password_tokens WHERE (created_at <= ?)
? = 2021-10-12 15:06:58
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
DELETE FROM registration_tokens WHERE (created_at <= ?)
? = 2021-10-12 15:06:58
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:58
? = session
? = 2021-10-13 14:06:58
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to 95838f9abf96ea6cf917dc08b279344d

query  rowsort
UPDATE access_tokens SET last_ip_address = ?, last_user_agent = ? WHERE (id = ?)
? = NULL
? = NULL
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT * FROM access_tokens WHERE (((type = ?) OR (((type = ?) AND (last_activity_at > ?)) OR ((type = ?) AND (last_activity_at > ?)))) AND (token = ?)) LIMIT 1
? = developer
? = session_remember
? = 2016-10-14 15:06:58
? = session
? = 2021-10-13 14:06:58
? = rX4VdLqvVZR0bLJaQpATaqG5EzTrLwd9Z691mYIw
----
9 values hashing to 070762af0b138be2ff398be6c9c8e142

query  rowsort
SELECT * FROM users WHERE (users.id = ?) LIMIT 1
? = 2
----
15 values hashing to eb3abd416b395cf9c4d6822248299d71

query  rowsort
UPDATE access_tokens SET last_ip_address = ?, last_user_agent = ? WHERE (id = ?)
? = 127.0.0.1
? = curl/7.74.0
? = 1
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e

query  rowsort
SELECT DISTINCT TABLE_NAME, CONSTRAINT_NAME FROM information_schema.KEY_COLUMN_USAGE WHERE REFERENCED_TABLE_NAME IS NOT NULL
----
76 values hashing to 907269df729592765ecede6686b14bdc

statement ok
ALTER TABLE `access_tokens` DROP FOREIGN KEY `access_tokens_user_id_foreign`


statement ok
ALTER TABLE `api_keys` DROP FOREIGN KEY `api_keys_user_id_foreign`


statement ok
ALTER TABLE `discussion_tag` DROP FOREIGN KEY `discussion_tag_discussion_id_foreign`


statement ok
ALTER TABLE `discussion_tag` DROP FOREIGN KEY `discussion_tag_tag_id_foreign`


statement ok
ALTER TABLE `discussion_user` DROP FOREIGN KEY `discussion_user_discussion_id_foreign`


statement ok
ALTER TABLE `discussion_user` DROP FOREIGN KEY `discussion_user_user_id_foreign`


statement ok
ALTER TABLE `discussions` DROP FOREIGN KEY `discussions_first_post_id_foreign`


statement ok
ALTER TABLE `discussions` DROP FOREIGN KEY `discussions_hidden_user_id_foreign`


statement ok
ALTER TABLE `discussions` DROP FOREIGN KEY `discussions_last_posted_user_id_foreign`


statement ok
ALTER TABLE `discussions` DROP FOREIGN KEY `discussions_last_post_id_foreign`


statement ok
ALTER TABLE `discussions` DROP FOREIGN KEY `discussions_user_id_foreign`


statement ok
ALTER TABLE `email_tokens` DROP FOREIGN KEY `email_tokens_user_id_foreign`


statement ok
ALTER TABLE `flags` DROP FOREIGN KEY `flags_post_id_foreign`


statement ok
ALTER TABLE `flags` DROP FOREIGN KEY `flags_user_id_foreign`


statement ok
ALTER TABLE `group_permission` DROP FOREIGN KEY `group_permission_group_id_foreign`


statement ok
ALTER TABLE `group_user` DROP FOREIGN KEY `group_user_group_id_foreign`


statement ok
ALTER TABLE `group_user` DROP FOREIGN KEY `group_user_user_id_foreign`


statement ok
ALTER TABLE `login_providers` DROP FOREIGN KEY `login_providers_user_id_foreign`


statement ok
ALTER TABLE `notifications` DROP FOREIGN KEY `notifications_from_user_id_foreign`


statement ok
ALTER TABLE `notifications` DROP FOREIGN KEY `notifications_user_id_foreign`


statement ok
ALTER TABLE `password_tokens` DROP FOREIGN KEY `password_tokens_user_id_foreign`


statement ok
ALTER TABLE `post_likes` DROP FOREIGN KEY `post_likes_post_id_foreign`


statement ok
ALTER TABLE `post_likes` DROP FOREIGN KEY `post_likes_user_id_foreign`


statement ok
ALTER TABLE `post_mentions_post` DROP FOREIGN KEY `post_mentions_post_mentions_post_id_foreign`


statement ok
ALTER TABLE `post_mentions_post` DROP FOREIGN KEY `post_mentions_post_post_id_foreign`


statement ok
ALTER TABLE `post_mentions_user` DROP FOREIGN KEY `post_mentions_user_mentions_user_id_foreign`


statement ok
ALTER TABLE `post_mentions_user` DROP FOREIGN KEY `post_mentions_user_post_id_foreign`


statement ok
ALTER TABLE `post_user` DROP FOREIGN KEY `post_user_post_id_foreign`


statement ok
ALTER TABLE `post_user` DROP FOREIGN KEY `post_user_user_id_foreign`


statement ok
ALTER TABLE `posts` DROP FOREIGN KEY `posts_discussion_id_foreign`


statement ok
ALTER TABLE `posts` DROP FOREIGN KEY `posts_edited_user_id_foreign`


statement ok
ALTER TABLE `posts` DROP FOREIGN KEY `posts_hidden_user_id_foreign`


statement ok
ALTER TABLE `posts` DROP FOREIGN KEY `posts_user_id_foreign`


statement ok
ALTER TABLE `tag_user` DROP FOREIGN KEY `tag_user_tag_id_foreign`


statement ok
ALTER TABLE `tag_user` DROP FOREIGN KEY `tag_user_user_id_foreign`


statement ok
ALTER TABLE `tags` DROP FOREIGN KEY `tags_last_posted_discussion_id_foreign`


statement ok
ALTER TABLE `tags` DROP FOREIGN KEY `tags_last_posted_user_id_foreign`


statement ok
ALTER TABLE `tags` DROP FOREIGN KEY `tags_parent_id_foreign`


query  rowsort
SHOW TABLES
----
24 values hashing to 71facf1f4f294d19ae6feb16f7709e76

query  rowsort
DROP TABLE `access_tokens`,`api_keys`,`discussion_tag`,`discussion_user`,`discussions`,`email_tokens`,`flags`,`group_permission`,`group_user`,`groups`,`login_providers`,`migrations`,`notifications`,`password_tokens`,`post_likes`,`post_mentions_post`,`post_mentions_user`,`post_user`,`posts`,`registration_tokens`,`settings`,`tag_user`,`tags`,`users`
----
0 values hashing to d41d8cd98f00b204e9800998ecf8427e
