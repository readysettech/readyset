# Tests for FROM clause ordering with mixed join/comma syntax
# These tests ensure that sqlparser's FROM clause parsing maintains correct
# left-to-right ordering when converting to ReadySet's AST

statement ok
create table t1 (id int, x int)

statement ok
create table t2 (id int, y int)

statement ok
create table t3 (id int, z int)

statement ok
insert into t1 (id, x) values (1, 10), (2, 20)

statement ok
insert into t2 (id, y) values (1, 100), (2, 200)

statement ok
insert into t3 (id, z) values (1, 1000), (2, 2000)

# Test the original bug: mixed join/comma syntax with LATERAL correlated subquery
# This ensures that table ordering is preserved so LATERAL can reference earlier tables
query I rowsort
SELECT count(*) 
FROM t1 AS T1 
INNER JOIN t2 AS TABLE2 ON T1.id = TABLE2.id, 
LATERAL (SELECT T3.z FROM t3 T3 WHERE T3.id = TABLE2.id LIMIT 1) TT
WHERE T1.id = 1;
----
1

# Test that comma-after-join preserves correct ordering (non-LATERAL case)
query III rowsort
SELECT t1.id, t2.y, t3.z 
FROM t1 
INNER JOIN t2 ON t1.id = t2.id, 
t3 
WHERE t1.id = t3.id AND t1.id = 1;
----
1
100
1000

