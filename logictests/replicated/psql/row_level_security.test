statement ok
create table rls_test (auth_id uuid, i int, b int, t text, dt date);

statement ok
insert into rls_test (auth_id, i, b, t, dt) values
('1c75691c-b02b-4fde-a049-bd6848dbf0d4', 10, 11, 'aa', '2025-02-18'),
('b7474fb5-007a-4d11-9a09-c062253189f1', 11, 10, 'aa', '2025-02-18'),
('8757f95f-4cb7-437b-9688-d11e5c943b4d', 11, 11, 'ab', '2025-02-17'),
('82abb461-3448-4a10-9ffa-eee8f4038582', 12, 11, 'bb', '2025-02-19');

statement ok
create rls on public.rls_test using (auth_id) = (my.var_auth_id);

statement ok
set my.var_auth_id = '1c75691c-b02b-4fde-a049-bd6848dbf0d4';

query T
select t from rls_test where b = 11;
----
aa

statement ok
set my.var_auth_id = '82abb461-3448-4a10-9ffa-eee8f4038582';

query T
select t from rls_test where b = 11;
----
bb

statement ok
set my.var_auth_id = '1c75691c-b02b-4fde-a049-bd6848dbf0d4';

query T
select t from rls_test where dt in ('2025-02-18', '2025-02-18', '2025-02-17', '2025-02-19');
----
aa
